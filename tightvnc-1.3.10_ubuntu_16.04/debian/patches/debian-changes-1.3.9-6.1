Description: Upstream changes introduced in version 1.3.9-6.1
 This patch has been created by dpkg-source during the package build.
 Here's the last changelog entry, hopefully it gives details on why
 those changes were made:
 .
 tightvnc (1.3.9-6.1) unstable; urgency=low
 .
   * Non-maintainer upload.
     - Update to packaging format "3.0 (quilt)".
   * debian/compat
     - Update to 7.
   * debian/control
     - (Build-Depends): Update xutils to xutils-dev (important;
       Closes: #575865). Update to debhelper 7.1. Remove obsolete x-dev.
     - (Depends): Add ${misc:Depends}.
     - (Homepage): New field.
     - (Standards-Version): Update to 3.8.4.
     - (tightvncserver::Depends): Replace obsolete xbase-clients with
       x11-utils and xauth. The needed binaries xdpyinfo and xauth
       are used in Perl program /usr/bin/tightvncserver.
   * debian/copyright
     - Point to GPL-2.
   * debian/patches
     - (10, 20): Add new patches.
     - (30): Convert original MIPS patch to apply to current sources.
     - (tightvnc-ftbfs-mips.patch): Removed. See 30.
    * debian/*.{postrm,prerm}
     - Add "set -e".
     - Fix Lintian maintainer-script-without-set-e.
   * debian/rules
     - (CC): Add. Export variable for xmkmf(1).
     - (DH_COMPAT): Delete; use debian/compat.
     - (install): Correct tightvncpasswd.1x to tightvncpasswd.1.
     - (binary-arch): Remove empty directories.
   * debian/source/format
     - New file.
   * debian/watch
     - New file.
   * debian/tightvncserver.doc-base
     - New file.
   * debian/xtightvncviewer.menu
     - (section): Update obsolete Apps/Net to
       Applications/Network/Communication.
 .
 The person named in the Author field signed this changelog entry.
Author: Jari Aalto <jari.aalto@cante.net>
Bug-Debian: http://bugs.debian.org/575865

---
The information above should follow the Patch Tagging Guidelines, please
checkout http://dep.debian.net/deps/dep3/ to learn about the format. Here
are templates for supplementary fields that you might want to add:

Origin: <vendor|upstream|other>, <url of original patch>
Bug: <url in upstream bugtracker>
Bug-Debian: http://bugs.debian.org/<bugnumber>
Forwarded: <no|not-needed|url proving that it has been forwarded>
Reviewed-By: <name and email of someone who approved the patch>
Last-Update: <YYYY-MM-DD>

Index: b/vncserver.man
===================================================================
--- a/vncserver.man
+++ b/vncserver.man
@@ -3,7 +3,7 @@
 .\" Man page for vncserver
 .\"
 .\" Copyright (C) 1998 Marcus.Brinkmann@ruhr-uni-bochum.de
-.\" Copyright (C) 2000, opal@debian.org
+.\" Copyright (C) 2000,2008 Ola Lundqvist <opal@debian.org>
 .\" Copyright (C) 2000, 2001 Red Hat, Inc.
 .\" Copyright (C) 2001, 2002 Constantin Kaplinsky
 .\"
@@ -18,9 +18,10 @@ vncserver \- a wrapper to launch an X se
 \fBvncserver\fR
 [:\fIdisplay\fR] [\-geometry \fIwidth\fRx\fIheight\fR] [\-depth \fIdepth\fR]
 [\-pixelformat rgb\fINNN\fR|bgr\fINNN\fR] [\-name \fIdesktop\-name\fR]
-[\fIXvnc\-options\fR...]
+[\| \-httpport\ int \|] [\| \-basehttpport\ int \|] [\| \-alwaysshared \|]
+[\| \-nevershared \|] [\fIXvnc\-options\fR...]
 .TP
-\fBvncserver\fR \-kill :\fIdisplay\fR
+\fBvncserver\fR [\| \-clean \|] \-kill :\fIdisplay\fR
 .TP
 \fBvncserver\fR \-help
 .SH DESCRIPTION
@@ -54,9 +55,27 @@ the viewer display.
 \fB\-name\fR \fIstring\fR
 This specifies the name of the desktop.
 .TP
+\fB\-clean\fR
+This option can be used in conjunction with
+.TP
 \fB\-kill\fR \fB:\fR\fIdisplay\fR
 Stops the session running on the specified display.
 .TP
+\fB\-nevershared\fR
+Never allow shared desktops.
+.TP
+\fB\-alwaysshared\fR
+Always allow shared desktops.
+.TP
+\fB\-basehttpport int\fR
+The base http port to use for the java client applet (you have to install
+the tightvnc-java package to make this work). The real port number will be
+port = base + display num.
+.TP
+\fB\-httpport int\fR
+The http port to use for the java client applet (you have to install
+the tightvnc-java package to make this work).
+.TP
 \fB\-help\fR
 Prints a short usage notice to stderr.
 .SH EXAMPLES
Index: b/Makefile
===================================================================
--- /dev/null
+++ b/Makefile
@@ -0,0 +1,1262 @@
+# Makefile generated by imake - do not edit!
+# $Xorg: imake.c,v 1.6 2001/02/09 02:03:15 xorgcvs Exp $
+
+# ----------------------------------------------------------------------
+# Makefile generated from "Imake.tmpl" and <Imakefile>
+# $Xorg: Imake.tmpl,v 1.4 2000/08/17 19:41:46 cpqbld Exp $
+# $XdotOrg: xc/config/cf/Imake.tmpl,v 1.9 2005/01/24 06:37:31 daniels Exp $
+#
+#
+#
+#
+# $XFree86: xc/config/cf/Imake.tmpl,v 3.155 2003/12/24 18:58:41 dickey Exp $
+# ----------------------------------------------------------------------
+
+all::
+
+.SUFFIXES: .i
+
+# $XdotOrg: xc/config/cf/Imake.cf,v 1.7 2005/03/02 11:20:29 gisburn Exp $
+# $Xorg: Imake.cf,v 1.4 2000/08/17 19:41:45 cpqbld Exp $
+
+# $XFree86: xc/config/cf/Imake.cf,v 3.88 2003/12/16 21:30:21 herrb Exp $
+
+# Keep cpp from replacing path elements containing i486/i586/i686
+
+# -----------------------------------------------------------------------
+# site-specific configuration parameters that need to come before
+# the platform-specific parameters - edit site.def to change
+
+# site:  $TOG: site.sample /main/r64_final/1 1998/02/05 16:28:49 kaleb $
+
+# site:  $XFree86: xc/config/cf/site.def,v 3.24 2000/06/25 20:17:29 dawes Exp $
+
+# $XFree86: xc/config/cf/xf86site.def,v 3.186 2003/06/25 18:06:22 eich Exp $
+
+# ----------------------------------------------------------------------
+# platform-specific configuration parameters - edit linux.cf to change
+
+# $XdotOrg: xc/config/cf/linux.cf,v 1.24 2005/03/06 01:05:00 branden Exp $
+# platform:  $Xorg: linux.cf,v 1.3 2000/08/17 19:41:47 cpqbld Exp $
+
+# platform:  $XFree86: xc/config/cf/linux.cf,v 3.220 2003/12/30 22:38:33 tsi Exp $
+
+# operating system:  Linux 2.6.32-trunk-686-bigmem i686 [ELF] (2.6.32)
+# libc:	(6.10.2)
+# binutils:	(220)
+
+# $Xorg: lnxLib.rules,v 1.3 2000/08/17 19:41:47 cpqbld Exp $
+# $XFree86: xc/config/cf/lnxLib.rules,v 3.52 2003/10/31 20:49:03 herrb Exp $
+
+# $XdotOrg: xc/config/cf/xorg.cf,v 1.44 2005/01/27 03:50:46 ajax Exp $
+
+# $Xorg: xfree86.cf,v 1.4 2000/08/17 19:41:49 cpqbld Exp $
+
+XORG_VERSION_CURRENT = (((6) * 10000000) + ((9) * 100000) + ((0) * 1000) + 0)
+RELEASE_VERSION = RELEASE-1
+
+AFB_DEFS = -DUSE_AFB
+
+DRIVERSDKDIR = $(USRLIBDIR)/Server
+DRIVERSDKMODULEDIR = $(USRLIBDIR)/Server/modules
+DRIVERSDKINCLUDEDIR = $(USRLIBDIR)/Server/include
+
+       XF86SRC = $(SERVERSRC)/hw/xfree86
+    XF86COMSRC = $(XF86SRC)/common
+ XF86PARSERSRC = $(XF86SRC)/parser
+     XF86OSSRC = $(XF86SRC)/os-support
+ XF86DRIVERSRC = $(XF86SRC)/drivers
+     DRIVERSRC = $(XF86DRIVERSRC)
+
+        XFREE86DOCDIR = $(DOCDIR)
+      XFREE86PSDOCDIR = $(DOCPSDIR)
+     XFREE86PDFDOCDIR = $(DOCPDFDIR)
+    XFREE86HTMLDOCDIR = $(DOCHTMLDIR)
+XFREE86JAPANESEDOCDIR = $(DOCDIR)/Japanese
+
+# $Xorg: xf86.rules,v 1.3 2000/08/17 19:41:48 cpqbld Exp $
+
+# $XFree86: xc/config/cf/xf86.rules,v 3.34tsi Exp $
+
+   SELINUX_LDFLAGS =
+
+   SELINUX_INCLUDES = -I/usr/include/selinux
+
+   SELINUX_CFLAGS =  -DHAVE_SELINUX
+
+   SELINUX_LIBS = -lselinux
+
+# ----------------------------------------------------------------------
+# site-specific configuration parameters that go after
+# the platform-specific parameters - edit site.def to change
+
+# site:  $TOG: site.sample /main/r64_final/1 1998/02/05 16:28:49 kaleb $
+
+# site:  $XFree86: xc/config/cf/site.def,v 3.24 2000/06/25 20:17:29 dawes Exp $
+
+# ---------------------------------------------------------------------
+# Imake rules for building libraries, programs, scripts, and data files
+# rules:  $Xorg: Imake.rules,v 1.3 2000/08/17 19:41:46 cpqbld Exp $
+# rules:  $XdotOrg: xc/config/cf/Imake.rules,v 1.8 2005/02/01 22:27:00 ajax Exp $
+#
+#
+#
+#
+# rules:  $XFree86: xc/config/cf/Imake.rules,v 3.128 2003/11/15 03:25:17 dawes Exp $
+
+.PHONY: all interfaces install install.man install.lib install.sdk 	depend includes cleandir
+
+ _NULLCMD_ = @ echo -n
+
+X_BYTE_ORDER = X_LITTLE_ENDIAN
+
+GLIDE2INCDIR = /usr/include/glide
+
+GLIDE3INCDIR = /usr/include/glide3
+
+GLIDE3LIBNAME = glide3
+
+TKLIBNAME = tk8.4
+
+TKLIBDIR = /usr/lib
+
+TCLLIBNAME = tcl8.4
+
+TCLIBDIR = /usr/lib
+
+          PATHSEP = /
+            SHELL = /bin/sh -e
+
+              TOP = .
+      CURRENT_DIR = .
+
+            IMAKE = imake
+           DEPEND = gccmakedep
+        MKDIRHIER = mkdir -p
+          REVPATH = revpath
+    EXPORTLISTGEN =
+             RMAN = /usr/bin/rman
+     RMANBASENAME = rman
+      RMANOPTIONS =
+        CONFIGSRC = $(TOP)/config
+         IMAKESRC = $(CONFIGSRC)/imake
+        DEPENDSRC = $(CONFIGSRC)/util
+
+          INCROOT = /usr/include
+        USRLIBDIR = /usr/lib
+           VARDIR = /var
+        VARLIBDIR = $(VARDIR)/lib
+  SYSTEMUSRLIBDIR = /usr/lib
+  SYSTEMUSRINCDIR = /usr/include
+         SHLIBDIR = /usr/lib
+       LINTLIBDIR = $(USRLIBDIR)/lint
+          MANPATH = /usr/share/man
+    MANSOURCEPATH = $(MANPATH)/man
+           MANDIR = $(MANSOURCEPATH)$(MANSECT)
+    SYSCALLMANDIR = $(MANSOURCEPATH)$(SYSCALLMANSECT)
+        LIBMANDIR = $(MANSOURCEPATH)$(LIBMANSECT)
+     DRIVERMANDIR = $(MANSOURCEPATH)4
+       FILEMANDIR = $(MANSOURCEPATH)$(FILEMANSECT)
+       GAMEMANDIR = $(MANSOURCEPATH)$(GAMEMANSECT)
+       MISCMANDIR = $(MANSOURCEPATH)7
+        ADMMANDIR = $(MANSOURCEPATH)$(ADMMANSECT)
+	  ICONDIR = "/usr/share/icons"
+      XCURSORPATH = "~/.icons:/usr/share/icons:/usr/share/pixmaps"
+     DRIVERMANDIR = $(MANSOURCEPATH)4
+     LOGDIRECTORY = $(VARDIR)/log
+
+        VARRUNDIR = $(VARDIR)/run
+
+         VARDBDIR = $(VARDIR)/lib
+
+               AR = ar clq
+
+# Nice try but useless: make will inherit BOOTSTRAPCFLAGS
+# from  top Makefile
+  BOOTSTRAPCFLAGS =
+
+               CC = gcc -m32
+               AS = gcc -m32 -c -x assembler
+
+.SUFFIXES: .cc
+
+              CXX = c++ -m32
+
+          CXXFILT = c++filt
+
+           CXXLIB = -lstdc++
+
+    CXXDEBUGFLAGS = -g -O2 -fno-strict-aliasing
+CXXDEPENDINCLUDES =
+ CXXEXTRA_DEFINES =
+CXXEXTRA_INCLUDES =
+   CXXSTD_DEFINES = -Dlinux -D__i386__ -D_POSIX_C_SOURCE=199309L 				-D_POSIX_SOURCE -D_XOPEN_SOURCE 				-D_BSD_SOURCE -D_SVID_SOURCE                                 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 				  				 $(CXXPROJECT_DEFINES)
+       CXXOPTIONS =
+      CXXINCLUDES = $(INCLUDES) $(TOP_INCLUDES) $(CXXEXTRA_INCLUDES)
+       CXXDEFINES = $(CXXINCLUDES) $(CXXSTD_DEFINES) $(THREADS_CXXDEFINES) $(DEFINES) $(CXXEXTRA_DEFINES)
+         CXXFLAGS = $(CXXDEBUGFLAGS) $(CXXOPTIONS) $(THREADS_CXXFLAGS) $(CXXDEFINES)
+
+         COMPRESS = compress
+          GZIPCMD = gzip
+
+              CPP = cpp $(STD_CPP_DEFINES)
+           RAWCPP = cpp -undef $(STD_CPP_OPTIONS)
+    PREPROCESSCMD = gcc -m32 -E $(STD_CPP_DEFINES)
+
+          INSTALL = install
+     INSTALLFLAGS = -c
+
+               LD = gcc -m32 -nostdlib
+
+              LEX = flex -l
+               M4 = m4
+          M4FLAGS =
+           LEXLIB = -lfl
+             YACC = bison -y
+           CCYACC = bison -y
+
+             LINT = lint
+
+      LINTLIBFLAG = -C
+         LINTOPTS = -axz
+               LN = ln -s
+             MAKE = make
+               MV = mv -f
+               CP = cp
+
+           RANLIB = ranlib
+
+  RANLIBINSTFLAGS =
+
+               RM = rm -f
+             PERL = perl
+         PERLOPTS =
+     PERLENVSETUP = env LC_ALL=C
+
+          MANSECT = 1
+   SYSCALLMANSECT = 2
+       LIBMANSECT = 3
+    DRIVERMANSECT = 4
+      FILEMANSECT = 5
+      GAMEMANSECT = 6
+      MISCMANSECT = 7
+       ADMMANSECT = 8
+       MANSRCSECT = s
+       MANNEWSECT = n
+ PROJECTMANSUFFIX = x
+        MANSUFFIX = $(MANSECT)$(PROJECTMANSUFFIX)
+ SYSCALLMANSUFFIX = $(SYSCALLMANSECT)$(PROJECTMANSUFFIX)
+     LIBMANSUFFIX = $(LIBMANSECT)$(PROJECTMANSUFFIX)
+  DRIVERMANSUFFIX = 4x
+    FILEMANSUFFIX = $(FILEMANSECT)$(PROJECTMANSUFFIX)
+    GAMEMANSUFFIX = $(GAMEMANSECT)$(PROJECTMANSUFFIX)
+    MISCMANSUFFIX = 7x
+     ADMMANSUFFIX = $(ADMMANSECT)$(PROJECTMANSUFFIX)
+   ADMINMANSUFFIX = 8
+     MANSRCSUFFIX = man
+     MANNEWSUFFIX = _man
+          MANDEFS = -D__apploaddir__=$(XAPPLOADDIR) -D__filemansuffix__=$(FILEMANSECT)$(PROJECTMANSUFFIX) -D__osfilemansuffix__=$(FILEMANSECT) -D__libmansuffix__=$(LIBMANSECT)$(PROJECTMANSUFFIX) -D__oslibmansuffix__=$(LIBMANSECT) -D__mansuffix__=$(MANSECT)$(PROJECTMANSUFFIX) -D__osmansuffix__=$(MANSECT) -D__syscallmansuffix__=$(SYSCALLMANSECT)$(PROJECTMANSUFFIX) -D__ossysmansuffix__=$(SYSCALLMANSECT) -D__gamemansuffix__=$(GAMEMANSECT)$(PROJECTMANSUFFIX) -D__osgamemansuffix__=$(GAMEMANSECT) -D__miscmansuffix__=$(MISCMANSECT)$(PROJECTMANSUFFIX) -D__osmiscmansuffix__=$(MISCMANSECT) -D__admmansuffix__=$(ADMMANSECT)$(PROJECTMANSUFFIX) -D__osadmmansuffix__=$(ADMMANSECT) -D__miscmansuffix__=$(MISCMANSECT)$(PROJECTMANSUFFIX) -D__osmiscmansuffix__=$(MISCMANSECT) -D__drivermansuffix__=$(DRIVERMANSECT)$(PROJECTMANSUFFIX) -D__osdrivermansuffix__=$(DRIVERMANSECT) -D__adminmansuffix__=$(ADMINMANSUFFIX) -D__projectroot__=$(PROJECTROOT) -D__xconfigfile__=$(XCONFIGFILE) -D__xconfigdir__=$(XCONFIGDIR) -D__xlogfile__=$(XLOGFILE) -D__xservername__=$(XSERVERNAME) -D__appmansuffix__=$(MANSECT)$(PROJECTMANSUFFIX) $(XORGMANDEFS) $(VENDORMANDEFS)
+
+   COMPRESSMANCMD = gzip -n
+
+            TROFF = groff -Tps
+            NROFF = nroff
+
+         MSMACROS = -ms
+        MANMACROS = -man
+              TBL = tbl
+              EQN = eqn
+             NEQN = neqn
+              COL = col
+         COLFLAGS = -b
+
+            MODCC = gcc -m32
+
+           MODCPP = cpp
+        MODCFLAGS = $(CFLAGS)
+            MODAS = gcc -m32 -c -x assembler
+       MODASFLAGS =
+
+            MODLD = gcc -m32 -nostdlib
+
+       MODLDFLAGS =
+MODLDCOMBINEFLAGS = -r
+            MODAR = ar clq
+
+        MODRANLIB = ranlib
+
+            DVIPS = dvips
+            LATEX = latex
+
+     STD_INCLUDES =
+  STD_CPP_OPTIONS = -traditional
+  STD_CPP_DEFINES = -traditional -Dlinux -D__i386__ -D_POSIX_C_SOURCE=199309L 				-D_POSIX_SOURCE -D_XOPEN_SOURCE 				-D_BSD_SOURCE -D_SVID_SOURCE                                 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 				  				 $(PROJECT_DEFINES)
+      STD_DEFINES = -Dlinux -D__i386__ -D_POSIX_C_SOURCE=199309L 				-D_POSIX_SOURCE -D_XOPEN_SOURCE 				-D_BSD_SOURCE -D_SVID_SOURCE                                 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 				  				 $(PROJECT_DEFINES)
+ EXTRA_LOAD_FLAGS =
+  EXTRA_LDOPTIONS =
+  EXTRA_LIBRARIES =
+             TAGS = ctags
+
+   PARALLELMFLAGS =
+
+    SHAREDCODEDEF =
+         SHLIBDEF =
+
+     SHLIBLDFLAGS = -shared $(SHLIBGLOBALSFLAGS)
+
+         NOSTDLIB = -nostdlib
+     POSTNOSTDLIB = -Wl,-Bstatic -lgcc -Wl,-Bdynamic
+
+         PICFLAGS = -fPIC
+
+      CXXPICFLAGS = -fPIC
+
+    PROTO_DEFINES = -DFUNCPROTO=15 -DNARROWPROTO
+
+     INSTPGMFLAGS =
+
+     INSTBINFLAGS = -m 0755
+     INSTUIDFLAGS = -m 4711
+     INSTLIBFLAGS = -m 0644
+     INSTINCFLAGS = -m 0444
+     INSTMANFLAGS = -m 0444
+     INSTDATFLAGS = -m 0444
+    INSTKMEMFLAGS = -m 4711
+
+      PROJECTROOT = /usr
+
+      CDEBUGFLAGS = -g -O2 -fno-strict-aliasing
+        CCOPTIONS =
+
+      ALLINCLUDES = $(INCLUDES) $(EXTRA_INCLUDES) $(TOP_INCLUDES) $(INSTALLED_INCLUDES) $(STD_INCLUDES)
+       ALLDEFINES = $(ALLINCLUDES) $(STD_DEFINES) $(PROTO_DEFINES) $(THREADS_DEFINES) $(MODULE_DEFINES) $(DEFINES) $(EXTRA_DEFINES)
+           CFLAGS = $(CDEBUGFLAGS) $(CCOPTIONS) $(THREADS_CFLAGS) $(MODULE_CFLAGS) $(ALLDEFINES)
+        LINTFLAGS = $(LINTOPTS) -DLINT $(ALLDEFINES) $(DEPEND_DEFINES)
+         LDPRELIB =  $(INSTALLED_LIBS)
+        LDPOSTLIB =
+        LDOPTIONS = $(CDEBUGFLAGS) $(CCOPTIONS)  $(EXTRA_LDOPTIONS) $(THREADS_LDFLAGS) $(LOCAL_LDFLAGS) $(LDPRELIBS)
+     CXXLDOPTIONS = $(CXXDEBUGFLAGS) $(CXXOPTIONS) $(EXTRA_LDOPTIONS) $(THREADS_CXXLDFLAGS) $(LOCAL_LDFLAGS) $(LDPRELIBS)
+
+           LDLIBS = $(LDPOSTLIBS) $(THREADS_LIBS) $(SYS_LIBRARIES) $(EXTRA_LIBRARIES)
+
+           CCLINK = $(CC)
+
+          CXXLINK = $(CXX)
+
+     LDSTRIPFLAGS = -x
+   LDCOMBINEFLAGS = -r
+      DEPENDFLAGS =
+   DEPEND_DEFINES =
+
+# Not sure this belongs here
+         TKLIBDIR = /usr/lib
+         TKINCDIR = /usr/include
+        TKLIBNAME = tk8.4
+        TKLIBRARY = -L$(TKLIBDIR) -l$(TKLIBNAME)
+        TCLLIBDIR = /usr/lib
+        TCLINCDIR = /usr/include
+       TCLLIBNAME = tcl8.4
+       TCLLIBRARY = -L$(TCLLIBDIR) -l$(TCLLIBNAME)
+
+        MACROFILE = linux.cf
+           RM_CMD = $(RM)
+
+    IMAKE_DEFINES =
+   IMAKE_WARNINGS = -Wundef
+
+         IRULESRC = $(CONFIGDIR)
+        IMAKE_CMD = $(IMAKE) -DUseInstalled -I$(IRULESRC) $(IMAKE_DEFINES) 		    $(IMAKE_WARNINGS)
+
+     ICONFIGFILES = $(IRULESRC)/Imake.tmpl $(IRULESRC)/X11.tmpl 			$(IRULESRC)/site.def $(IRULESRC)/$(MACROFILE) 			$(IRULESRC)/xfree86.cf $(IRULESRC)/xf86.rules $(IRULESRC)/xorgsite.def $(IRULESRC)/host.def $(EXTRA_ICONFIGFILES)
+
+# $Xorg: X11.rules,v 1.4 2000/08/17 19:41:46 cpqbld Exp $
+
+# $XFree86: xc/config/cf/X11.rules,v 1.6 2001/01/17 16:22:31 dawes Exp $
+
+# ----------------------------------------------------------------------
+# X Window System Build Parameters and Rules
+# $XdotOrg: xc/config/cf/X11.tmpl,v 1.52 2005/09/22 23:54:18 alanc Exp $
+# $Xorg: X11.tmpl,v 1.6 2000/08/17 19:41:46 cpqbld Exp $
+#
+#
+#
+#
+# $XFree86: xc/config/cf/X11.tmpl,v 1.248 2004/02/16 04:07:37 dawes Exp $
+
+XORGRELSTRING = `echo 6 9 0 | sed -e 's/ /./g' -e 's/^/Version\\\ /'`
+  XORGMANNAME = X Version 11
+
+STICKY_DEFINES = -DHAS_STICKY_DIR_BIT
+
+FCHOWN_DEFINES = -DHAS_FCHOWN
+
+# -----------------------------------------------------------------------
+# X Window System make variables; these need to be coordinated with rules
+
+             XTOP = $(TOP)
+           BINDIR = /usr/bin
+     BUILDINCROOT = $(TOP)/exports
+      BUILDINCDIR = $(BUILDINCROOT)/include
+      BUILDINCTOP = ../..
+      BUILDLIBDIR = $(TOP)/exports/lib
+      BUILDLIBTOP = ../..
+      BUILDBINDIR = $(TOP)/exports/bin
+      BUILDBINTOP = ../..
+   BUILDMODULEDIR = $(BUILDLIBDIR)/modules
+     BUILDI18NDIR = $(BUILDLIBDIR)/locale
+   BUILDMODULETOP = $(BUILDLIBTOP)/..
+    XBUILDINCROOT = $(XTOP)/exports
+     XBUILDINCDIR = $(XBUILDINCROOT)/include/X11
+     XBUILDINCTOP = ../../..
+     XBUILDBINDIR = $(XBUILDINCROOT)/bin
+           INCDIR = $(INCROOT)
+           ADMDIR = /usr/adm
+           LIBDIR = /usr/lib/X11
+         SHAREDIR = /usr/share/X11
+       LIBEXECDIR = /usr/libexec
+        MODULEDIR = $(USRLIBDIR)/modules
+   TOP_X_INCLUDES =
+          XBINDIR = $(PROJECTROOT)/bin
+
+       INSTSRCDIR = /usr/src
+
+        ETCX11DIR = /etc/X11
+
+          CONFDIR = $(ETCX11DIR)
+
+           DOCDIR = $(LIBDIR)/doc
+       DOCHTMLDIR = $(DOCDIR)/html
+         DOCPSDIR = $(DOCDIR)/PostScript
+        DOCPDFDIR = $(DOCDIR)/PDF
+          FONTDIR = /usr/share/fonts/X11
+     ENCODINGSDIR = /usr/share/fonts/X11/encodings
+         XINITDIR = $(LIBDIR)/xinit
+           XDMDIR = $(LIBDIR)/xdm
+        XDMVARDIR = $(VARLIBDIR)/xdm
+           TWMDIR = $(LIBDIR)/twm
+           XSMDIR = $(LIBDIR)/xsm
+           NLSDIR = $(LIBDIR)/nls
+       XLOCALEDIR = $(LIBDIR)/locale
+      LBXPROXYDIR = $(LIBDIR)/lbxproxy
+  PROXYMANAGERDIR = $(LIBDIR)/proxymngr
+        XPRINTDIR = $(LIBDIR)/xserver
+      XAPPLOADDIR = /etc/X11/app-defaults
+       FONTCFLAGS = -t
+
+     INSTAPPFLAGS = $(INSTDATFLAGS)
+
+              RGB = $(XBINDIR)/rgb
+            FONTC = $(XBINDIR)/bdftopcf
+      MKFONTSCALE = $(XBINDIR)/mkfontscale
+        MKFONTDIR = $(XBINDIR)/mkfontdir
+      MKHTMLINDEX = $(XBINDIR)/mkhtmlindex
+          UCS2ANY = $(XBINDIR)/ucs2any
+      BDFTRUNCATE = $(XBINDIR)/bdftruncate
+     UCSMAPPREFIX = $(FONTDIR)/util/map-
+       XCURSORGEN = $(XBINDIR)/xcursorgen
+
+     HTMLINDEXCMD = HtmlIndexCmd
+
+       DOCUTILSRC = $(XTOP)/doc/util
+        CLIENTSRC = $(TOP)/clients
+          DEMOSRC = $(TOP)/demos
+       XDOCMACROS = $(DOCUTILSRC)/macros.t
+       XIDXMACROS = $(DOCUTILSRC)/indexmacros.t
+       PROGRAMSRC = $(TOP)/programs
+           LIBSRC = $(XTOP)/lib
+          FONTSRC = $(XTOP)/fonts
+     ENCODINGSSRC = $(FONTSRC)/encodings
+       INCLUDESRC = $(BUILDINCROOT)/include
+      XINCLUDESRC = $(INCLUDESRC)/X11
+        SERVERSRC = $(XTOP)/programs/Xserver
+       CONTRIBSRC = $(XTOP)/../contrib
+   UNSUPPORTEDSRC = $(XTOP)/unsupported
+           DOCSRC = $(XTOP)/doc
+           RGBSRC = $(XTOP)/programs/rgb
+      BDFTOPCFSRC = $(PROGRAMSRC)/bdftopcf
+     MKFONTDIRSRC = $(PROGRAMSRC)/mkfontdir
+    FONTSERVERSRC = $(PROGRAMSRC)/xfs
+       FONTINCSRC = $(XTOP)/include/fonts
+        EXTINCSRC = $(XTOP)/include/extensions
+      FTSOURCEDIR = FreeTypeSrcDir
+        DRMSRCDIR = $(TOP)/extras/drm
+       MESASRCDIR = $(TOP)/extras/Mesa
+  OGLSAMPLESRCDIR = $(TOP)/extras/ogl-sample
+        PSWRAPSRC = $(XTOP)/config/pswrap
+     TRANSCOMMSRC = $(LIBSRC)/xtrans
+   TRANS_INCLUDES = -I$(TRANSCOMMSRC)
+ CONNECTION_FLAGS = -DUNIXCONN -DTCPCONN $(STICKY_DEFINES) $(FCHOWN_DEFINES) -DIPv6
+XTRANS_FAILDEFINES = -DFAIL_HARD
+
+    VENDORMANNAME = X.Org
+ VENDORMANVERSION = `echo 6 9 0 | sed -e 's/ /./g' -e 's/^/Version\\\ /'`
+      XORGMANDEFS = -D__xorgversion__="\"$(XORGRELSTRING)\" \"$(XORGMANNAME)\""
+    VENDORMANDEFS = -D__vendorversion__="$(VENDORMANVERSION) $(VENDORMANNAME)"
+       VENDORNAME = The X.Org Foundation
+  VENDORNAMESHORT = X.Org
+
+ VENDORWEBSUPPORT = http://wiki.X.Org
+
+VENDORSUPPORTDEFS = -D__VENDORDWEBSUPPORT__='"$(VENDORWEBSUPPORT)"'
+
+      XKBDEFRULES = xorg
+  XKBDEFRULESDEFS = -D__XKBDEFRULES__='"$(XKBDEFRULES)"'
+
+     XCONFIGFILE = xorg.conf
+      XCONFIGDIR = $(LIBDIR)
+        XLOGFILE = Xorg
+     XSERVERNAME = Xorg
+
+       XENVLIBDIR = $(USRLIBDIR)
+   CLIENTENVSETUP = LD_LIBRARY_PATH=$(XENVLIBDIR) XLOCALEDIR=$(BUILDLIBDIR)/locale
+
+# $Xorg: lnxLib.tmpl,v 1.3 2000/08/17 19:41:47 cpqbld Exp $
+# $XFree86: xc/config/cf/lnxLib.tmpl,v 3.19 2003/10/15 22:47:48 herrb Exp $
+
+          XLIBSRC = $(LIBSRC)/X11
+
+SOXLIBREV = 6.2
+DEPXONLYLIB =
+XONLYLIB =  -lX11
+
+LINTXONLY = $(LINTLIBDIR)/llib-lX11.ln
+
+      DEPXLIBONLY = $(DEPXONLYLIB)
+         XLIBONLY = $(XONLYLIB)
+     LINTXONLYLIB = $(LINTXONLY)
+
+      XEXTLIBSRC = $(LIBSRC)/Xext
+
+SOXEXTREV = 6.4
+DEPEXTENSIONLIB =
+EXTENSIONLIB =  -lXext
+
+LINTEXTENSION = $(LINTLIBDIR)/llib-lXext.ln
+
+LINTEXTENSIONLIB = $(LINTEXTENSION)
+          DEPXLIB = $(DEPEXTENSIONLIB) $(DEPXONLYLIB)
+             XLIB = $(EXTENSIONLIB) $(XONLYLIB)
+         LINTXLIB = $(LINTXONLYLIB)
+
+    XSSLIBSRC = $(LIBSRC)/Xss
+
+SOXSSREV = 1.0
+DEPXSSLIB =
+XSSLIB =  -lXss
+
+LINTXSS = $(LINTLIBDIR)/llib-lXss.ln
+
+    XXF86MISCLIBSRC = $(LIBSRC)/Xxf86misc
+
+SOXXF86MISCREV = 1.1
+DEPXXF86MISCLIB =
+XXF86MISCLIB =  -lXxf86misc
+
+LINTXXF86MISC = $(LINTLIBDIR)/llib-lXxf86misc.ln
+
+    XXF86VMLIBSRC = $(LIBSRC)/Xxf86vm
+
+SOXXF86VMREV = 1.0
+DEPXXF86VMLIB =
+XXF86VMLIB =  -lXxf86vm
+
+LINTXXF86VM = $(LINTLIBDIR)/llib-lXxf86vm.ln
+
+    XXF86DGALIBSRC = $(LIBSRC)/Xxf86dga
+
+SOXXF86DGAREV = 1.0
+DEPXXF86DGALIB =
+XXF86DGALIB =  -lXxf86dga
+
+LINTXXF86DGA = $(LINTLIBDIR)/llib-lXxf86dga.ln
+
+    XXF86RUSHLIBSRC = $(LIBSRC)/Xxf86rush
+
+SOXXF86RUSHREV = 1.0
+DEPXXF86RUSHLIB =
+XXF86RUSHLIB =  -lXxf86rush
+
+LINTXXF86RUSH = $(LINTLIBDIR)/llib-lXxf86rush.ln
+
+    XVLIBSRC = $(LIBSRC)/Xv
+
+SOXVREV = 1.0
+DEPXVLIB =
+XVLIB =  -lXv
+
+LINTXV = $(LINTLIBDIR)/llib-lXv.ln
+
+    XVMCLIBSRC = $(LIBSRC)/XvMC
+
+SOXVMCREV = 1.0
+DEPXVMCLIB =
+XVMCLIB =  -lXvMC
+
+LINTXVMC = $(LINTLIBDIR)/llib-lXvMC.ln
+
+    XINERAMALIBSRC = $(LIBSRC)/Xinerama
+
+SOXINERAMAREV = 1.0
+DEPXINERAMALIB =
+XINERAMALIB =  -lXinerama
+
+LINTXINERAMA = $(LINTLIBDIR)/llib-lXinerama.ln
+
+    XRESLIBSRC = $(LIBSRC)/XRes
+
+SOXRESREV = 1.0
+DEPXRESLIB =
+XRESLIB =  -lXRes
+
+LINTXRES = $(LINTLIBDIR)/llib-lXRes.ln
+
+    DMXLIBSRC = $(LIBSRC)/dmx
+
+SODMXREV = 1.0
+DEPDMXLIB =
+DMXLIB =  -ldmx
+
+LINTDMX = $(LINTLIBDIR)/llib-ldmx.ln
+
+    DPSLIBSRC = $(LIBSRC)/dps
+
+DEPDPSLIB = $(USRLIBDIR)/libdps.a
+DPSLIB =  -ldps
+
+LINTDPS = $(LINTLIBDIR)/llib-ldps.ln
+
+    DPSTKLIBSRC = $(LIBSRC)/dpstk
+
+DEPDPSTKLIB = $(USRLIBDIR)/libdpstk.a
+DPSTKLIB =  -ldpstk
+
+LINTDPSTK = $(LINTLIBDIR)/llib-ldpstk.ln
+
+    PSRESLIBSRC = $(LIBSRC)/psres
+
+DEPPSRESLIB = $(USRLIBDIR)/libpsres.a
+PSRESLIB =  -lpsres
+
+LINTPSRES = $(LINTLIBDIR)/llib-lpsres.ln
+
+    GLULIBSRC = $(LIBSRC)/GLU
+
+SOGLUREV = 1.3
+DEPGLULIB =
+GLULIB =  -lGLU
+
+LINTGLU = $(LINTLIBDIR)/llib-lGLU.ln
+
+    GLXLIBSRC = $(LIBSRC)/GL
+
+SOGLREV = 1.2
+DEPGLXLIB =
+GLXLIB =  -lGL
+
+LINTGLX = $(LINTLIBDIR)/llib-lGL.ln
+
+    GLWIDGETSRC = $(LIBSRC)/GLw
+
+DEPGLWLIB = $(USRLIBDIR)/libGLw.a
+GLWLIB =  -lGLw
+
+LINTGLW = $(LINTLIBDIR)/llib-lGLw.ln
+
+XRENDERDIR = /usr
+XRENDERLIBDIR = /usr/lib
+XRENDERINCDIR = /usr/include
+XRENDERLIB = -L$(XRENDERLIBDIR) -lXrender
+DEPXRENDERLIB =
+
+XRENDERINCLUDES = -I$(XRENDERINCDIR)
+
+    XRANDRLIBSRC = $(LIBSRC)/Xrandr
+
+SOXRANDRREV = 2.0
+DEPXRANDRLIB =
+XRANDRLIB =  -lXrandr
+
+LINTXRANDR = $(LINTLIBDIR)/llib-lXrandr.ln
+
+    XFIXESLIBSRC = $(LIBSRC)/Xfixes
+
+SOXFIXESREV = 3.0
+DEPXFIXESLIB =
+XFIXESLIB =  -lXfixes
+
+LINTXFIXES = $(LINTLIBDIR)/llib-lXfixes.ln
+
+   XDAMAGELIBSRC = $(LIBSRC)/Xdamage
+
+SOXDAMAGEREV = 1.0
+DEPXDAMAGELIB =
+XDAMAGELIB =  -lXdamage
+
+LINTXDAMAGE = $(LINTLIBDIR)/llib-lXdamage.ln
+
+XCOMPOSITELIBSRC = $(LIBSRC)/Xcomposite
+
+SOXCOMPOSITEREV = 1.0
+DEPXCOMPOSITELIB =
+XCOMPOSITELIB =  -lXcomposite
+
+LINTXCOMPOSITE = $(LINTLIBDIR)/llib-lXcomposite.ln
+
+XEVIELIBSRC = $(LIBSRC)/Xevie
+
+SOXEVIEREV = 1.0
+DEPXEVIELIB =
+XEVIELIB =  -lXevie
+
+LINTXEVIE = $(LINTLIBDIR)/llib-lXevie.ln
+
+XCURSORDIR = /usr
+XCURSORLIBDIR = /usr/lib
+XCURSORINCDIR = /usr/include
+XCURSORLIB = -L$(XCURSORLIBDIR) -lXcursor
+
+XCURSORINCLUDES=-I$(XCURSORINCDIR) $(XRENDERINCLUDES)
+
+   APPLEWMLIBSRC = $(LIBSRC)/apple
+
+DEPAPPLEWMLIB = $(USRLIBDIR)/libAppleWM.a
+APPLEWMLIB =  -lAppleWM
+
+LINTAPPLEWM = $(LINTLIBDIR)/llib-lAppleWM.ln
+
+   WINDOWSWMLIBSRC = $(LIBSRC)/windows
+
+DEPWINDOWSWMLIB = $(USRLIBDIR)/libWindowsWM.a
+WINDOWSWMLIB =  -lWindowsWM
+
+LINTWINDOWSWM = $(LINTLIBDIR)/llib-lWindowsWM.ln
+
+    XFONTCACHELIBSRC = $(LIBSRC)/Xfontcache
+
+DEPXFONTCACHELIB = $(USRLIBDIR)/libXfontcache.a
+XFONTCACHELIB =  -lXfontcache
+
+LINTXFONTCACHE = $(LINTLIBDIR)/llib-lXfontcache.ln
+
+         XAUTHSRC = $(LIBSRC)/Xau
+
+SOXAUTHREV = 6.0
+DEPXAUTHLIB =
+XAUTHLIB =  -lXau
+
+LINTXAUTH = $(LINTLIBDIR)/llib-lXau.ln
+
+      XDMCPLIBSRC = $(LIBSRC)/Xdmcp
+
+SOXDMCPREV = 6.0
+DEPXDMCPLIB =
+XDMCPLIB =  -lXdmcp
+
+LINTXDMCP = $(LINTLIBDIR)/llib-lXdmcp.ln
+
+           XMUSRC = $(LIBSRC)/Xmu
+
+SOXMUREV = 6.2
+DEPXMULIB =
+XMULIB =  -lXmu
+
+LINTXMU = $(LINTLIBDIR)/llib-lXmu.ln
+
+           XMUUSRC = $(LIBSRC)/Xmuu
+
+SOXMUUREV = 1.0
+DEPXMUULIB =
+XMUULIB =  -lXmuu
+
+LINTXMUU = $(LINTLIBDIR)/llib-lXmuu.ln
+
+       OLDXLIBSRC = $(LIBSRC)/oldX
+
+DEPOLDXLIB = $(USRLIBDIR)/liboldX.a
+OLDXLIB =  -loldX
+
+LINTOLDX = $(LINTLIBDIR)/llib-loldX.ln
+
+         XPLIBSRC = $(LIBSRC)/Xp
+
+SOXPREV = 6.2
+DEPXPLIB =
+XPLIB =  -lXp
+
+LINTXP = $(LINTLIBDIR)/llib-lXp.ln
+
+       TOOLKITSRC = $(LIBSRC)/Xt
+
+SOXTREV = 6.0
+DEPXTOOLONLYLIB =
+XTOOLONLYLIB =  -lXt
+
+LINTXTOOLONLY = $(LINTLIBDIR)/llib-lXt.ln
+
+      DEPXTOOLLIB = $(DEPXTOOLONLYLIB) $(DEPSMLIB) $(DEPICELIB)
+         XTOOLLIB = $(XTOOLONLYLIB) $(SMLIB) $(ICELIB)
+     LINTXTOOLLIB = $(LINTXTOOLONLYLIB)
+
+       XALIBSRC = $(LIBSRC)/Xa
+
+SOXAREV = 1.0
+DEPXALIB =
+XALIB =  -lXa
+
+LINTXA = $(LINTLIBDIR)/llib-lXa.ln
+
+       AWIDGETSRC = $(LIBSRC)/Xaw
+
+SOXAWREV = 8.0
+DEPXAWLIB =
+XAWLIB =  -lXaw
+
+LINTXAW = $(LINTLIBDIR)/llib-lXaw.ln
+
+       AWIDGET7SRC = $(LIBSRC)/Xaw7
+
+SOXAW7REV = 7.0
+DEPXAW7LIB =
+XAW7LIB =  -lXaw
+
+LINTXAW7 = $(LINTLIBDIR)/llib-lXaw.ln
+
+       AWIDGET6SRC = $(LIBSRC)/Xaw6
+
+SOXAW6REV = 6.1
+DEPXAW6LIB =
+XAW6LIB =  -lXaw
+
+LINTXAW6 = $(LINTLIBDIR)/llib-lXaw.ln
+
+         XILIBSRC = $(LIBSRC)/Xi
+
+SOXINPUTREV = 6.0
+DEPXILIB =
+XILIB =  -lXi
+
+LINTXI = $(LINTLIBDIR)/llib-lXi.ln
+
+      XTESTLIBSRC = $(LIBSRC)/Xtst
+
+SOXTESTREV = 6.1
+DEPXTESTLIB =
+XTESTLIB =  -lXtst
+
+LINTXTEST = $(LINTLIBDIR)/llib-lXtst.ln
+
+DEPXBSDLIB = $(USRLIBDIR)/libXbsd.a
+XBSDLIB =  -lXbsd
+
+LINTXBSD = $(LINTLIBDIR)/llib-lXbsd.ln
+
+           ICESRC = $(LIBSRC)/ICE
+
+SOICEREV = 6.4
+DEPICELIB =
+ICELIB =  -lICE
+
+LINTICE = $(LINTLIBDIR)/llib-lICE.ln
+
+            SMSRC = $(LIBSRC)/SM
+
+SOSMREV = 6.0
+DEPSMLIB =
+SMLIB =  -lSM
+
+LINTSM = $(LINTLIBDIR)/llib-lSM.ln
+
+           XKEYSRC = $(LIBSRC)/Xkey
+
+SOXKEYREV = 6.0
+DEPXKEYLIB =
+XKEYLIB =  -lXkey
+
+LINTXKEY = $(LINTLIBDIR)/llib-lXkey.ln
+
+         FSLIBSRC = $(LIBSRC)/FS
+
+SOFSREV = 6.0
+DEPFSLIB =
+FSLIB =  -lFS
+
+LINTFS = $(LINTLIBDIR)/llib-lFS.ln
+
+         FONTLIBSRC = $(LIBSRC)/font
+
+DEPFONTLIB = $(USRLIBDIR)/libXfont.a
+FONTLIB = -L$(FREETYPELIBDIR) -L$(FONTLIBSRC)  -lXfont
+
+LINTXFONT = $(LINTLIBDIR)/llib-lXfont.ln
+#
+DEPXFONTLIB = $(USRLIBDIR)/libXfont.a
+XFONTLIB =  -lXfont
+
+LINTXFONT = $(LINTLIBDIR)/llib-lXfont.ln
+
+     FONTSTUBLIBSRC = $(FONTLIBSRC)/stubs
+
+DEPFONTSTUBLIB = $(USRLIBDIR)/libfntstubs.a
+FONTSTUBLIB =  -lfntstubs
+
+LINTFONTSTUB = $(LINTLIBDIR)/llib-lfntstubs.ln
+         DEPFONTLIB = $(DEPXFONTLIB) $(DEPFONTSTUBLIB)
+            FONTLIB = $(XFONTLIB) $(FONTSTUBLIB) $(FREETYPE2LIB)
+
+         FONTENCLIBSRC = $(LIBSRC)/fontenc
+
+DEPXFONTENCLIB = $(USRLIBDIR)/libfontenc.a
+XFONTENCLIB =  -lfontenc
+
+LINTXFONTENC = $(LINTLIBDIR)/llib-lfontenc.ln
+
+          XPMLIBSRC = $(LIBSRC)/Xpm
+
+SOXPMREV = 4.11
+DEPXPMLIB =
+XPMLIB =  -lXpm
+
+LINTXPM = $(LINTLIBDIR)/llib-lXpm.ln
+
+FREETYPE2DIR = /usr
+FREETYPE2LIBDIR = /usr/lib
+FREETYPE2INCDIR = /usr/include
+
+FREETYPE2LIB = -lfreetype
+
+FREETYPE2INCLUDES = -I$(FREETYPE2INCDIR)/freetype2 -I$(FREETYPE2INCDIR)/freetype2/config
+
+FREETYPE2DEFINES = -DFREETYPE2
+
+          EXPATLIBSRC = $(LIBSRC)/expat
+
+SOEXPATREV = 0.4
+DEPEXPATLIB =
+EXPATLIB =  -lexpat
+
+LINTEXPAT = $(LINTLIBDIR)/llib-lexpat.ln
+
+EXPATDIR = /usr
+EXPATLIBDIR = /usr/lib
+EXPATINCDIR = /usr/include
+
+EXPATINCLUDES =
+
+EXPATLIB = -lexpat
+
+EXPATDEFINES = -DEXPAT
+
+XFTDIR = /usr
+XFTLIBDIR = /usr/lib
+XFTINCDIR = /usr/include
+XFTLIB = -L$(XFTLIBDIR) -lXft
+
+XFTINCLUDES= -I$(XFTINCDIR) $(FONTCONFIGINCLUDES) $(FREETYPE2INCLUDES) $(XRENDERINCLUDES)
+
+FONTCONFIGDIR = /usr
+FONTCONFIGLIBDIR = /usr/lib
+FONTCONFIGINCDIR = /usr/include
+FONTCONFIGBINDIR = /usr/bin
+
+FONTCONFIGLIB = -lfontconfig
+
+FONTCONFIGINCLUDES =
+
+FCCACHE = $(FONTCONFIGBINDIR)/fc-cache
+
+FONTCONFIGDEFINES = -DFONTCONFIG
+
+LIBPNGINCDIR = /usr/include
+
+LIBPNGINC=
+
+LIBPNGDIR = /usr
+LIBPNGLIBDIR = /usr/lib
+LIBPNGINCDIR = /usr/include
+
+LIBPNGLIB = -lpng
+
+    XKBFILELIBSRC = $(LIBSRC)/xkbfile
+
+SOXKBFILEREV =  1.0
+DEPXKBFILELIB =
+XKBFILELIB =  -lxkbfile
+
+LINTXKBFILE = $(LINTLIBDIR)/llib-lxkbfile.ln
+
+     XKBCOMPCMD = $(XBINDIR)/xkbcomp
+
+    XKBUILIBSRC = $(LIBSRC)/xkbui
+
+SOXKBUIREV =  1.0
+DEPXKBUILIB =
+XKBUILIB =  -lxkbui
+
+LINTXKBUI = $(LINTLIBDIR)/llib-lxkbui.ln
+
+EXTRAXAWREQS =
+
+EXTRAXAWCLIENTDEPLIBS =
+
+EXTRAXAWCLIENTLIBS =
+
+        XTRAPLIBSRC = $(LIBSRC)/XTrap
+
+SOXTRAPREV = 6.4
+DEPXTRAPLIB =
+XTRAPLIB =  -lXTrap
+
+LINTXTRAP = $(LINTLIBDIR)/llib-lXTrap.ln
+
+          DEPLIBS = $(DEPXAWLIB) $(DEPXMULIB) $(DEPXTOOLLIB) $(DEPXLIB)
+
+         DEPLIBS1 = $(DEPLIBS)
+         DEPLIBS2 = $(DEPLIBS)
+         DEPLIBS3 = $(DEPLIBS)
+         DEPLIBS4 = $(DEPLIBS)
+         DEPLIBS5 = $(DEPLIBS)
+         DEPLIBS6 = $(DEPLIBS)
+         DEPLIBS7 = $(DEPLIBS)
+         DEPLIBS8 = $(DEPLIBS)
+         DEPLIBS9 = $(DEPLIBS)
+         DEPLIBS10 = $(DEPLIBS)
+
+      XFTPRELOADPATTERN = libXft.so.?
+  XRENDERPRELOADPATTERN = libXrender.so.?
+    XFONTPRELOADPATTERN = libXfont*.so.?
+
+XMULIBONLY = -lXmu
+XMULIB = $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
+
+        CONFIGDIR = $(LIBDIR)/config
+
+    USRLIBDIRPATH = $(USRLIBDIR)
+        LDPRELIBS =   $(INSTALLED_LIBS)
+       LDPOSTLIBS =
+     TOP_INCLUDES =  $(TOP_X_INCLUDES)
+  PROJECT_DEFINES =
+   VENDOR_DEFINES = -DXVENDORNAME='"$(VENDORNAME)"' -DXVENDORNAMESHORT='"$(VENDORNAMESHORT)"'
+
+CXXPROJECT_DEFINES =
+
+# ----------------------------------------------------------------------
+# start of Imakefile
+
+SUBDIRS = libvncauth vncviewer vncpasswd vncconnect
+
+World:
+	make Makefiles
+	make depend
+	make all
+	@echo ""
+	@echo Built $(SUBDIRS).
+	@echo 'To build Xvnc, do "cd Xvnc", followed by "./configure" then "make"'
+	@echo ""
+
+libs:
+	@echo 'No libraries included.'
+
+all::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "making" all "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS)  all; \
+	done
+
+depend::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "depending" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS)  depend; \
+	done
+
+# ----------------------------------------------------------------------
+# common rules for all Makefiles - do not edit
+
+.c.i:
+	$(RM) $@
+	 	$(CC) -E $(CFLAGS) $(_NOOP_) $*.c > $@
+
+.SUFFIXES: .ii
+
+.cc.ii:
+	$(RM) $@
+	 	$(CC) -E $(CFLAGS) $(_NOOP_) $*.cc > $@
+
+.SUFFIXES: .s
+
+.c.s:
+	$(RM) $@
+	 	$(CC) -S $(CFLAGS) $(_NOOP_) $*.c
+
+.cc.s:
+	$(RM) $@
+	 	$(CC) -S $(CFLAGS) $(_NOOP_) $*.cc
+
+emptyrule::
+
+cleandir::
+	$(RM) *.CKP *.ln *.BAK *.bak *.o core errs ,* *~ *.a .emacs_* tags TAGS make.log MakeOut   "#"*
+
+Makefile::
+	-@if [ -f Makefile ]; then set -x; \
+	$(RM) Makefile.bak; $(MV) Makefile Makefile.bak; \
+	else exit 0; fi
+	$(IMAKE_CMD) -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT_DIR)
+
+tags::
+	$(TAGS) -w *.[ch]
+	$(TAGS) -xw *.[ch] > TAGS
+
+man_keywords::
+
+html_index::
+
+clean:: cleandir
+
+distclean:: cleandir
+
+# ----------------------------------------------------------------------
+# rules for building in SUBDIRS - do not edit
+
+install::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "installing" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS) DESTDIR=$(DESTDIR) install; \
+	done
+
+install.man::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "installing man pages" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS) DESTDIR=$(DESTDIR) install.man; \
+	done
+
+install.sdk::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "installing driver SDK" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS) DESTDIR='$(DESTDIR)' install.sdk; \
+	done
+
+clean::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "cleaning" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS)  clean; \
+	done
+
+tags::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "tagging" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS) TAGS='$(TAGS)' tags; \
+	done
+
+$(ONESUBDIR)/Makefile:
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[n]*) executeit="no";; esac; done; \
+	cd $(ONESUBDIR) && \
+	if [ "$$executeit" != "no" ]; then \
+		$(IMAKE_CMD) -DTOPDIR=$(IMAKETOP) -DCURDIR=$(ONECURDIR)$(ONESUBDIR); \
+	fi;
+
+Makefiles::
+	-@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[n]*) executeit="no";; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		case "$(CURRENT_DIR)" in \
+		.) curdir= ;; \
+		*) curdir=$(CURRENT_DIR)/ ;; \
+		esac; \
+		echo "making Makefiles in $$curdir$$i..."; \
+		itmp=`echo $$i | sed -e 's;^\./;;g' -e 's;/\./;/;g'`; \
+		curtmp="$(CURRENT_DIR)" \
+		toptmp=""; \
+		case "$$itmp" in \
+		    ../?*) \
+			while echo "$$itmp" | grep '^\.\./' > /dev/null;\
+			  do \
+			     toptmp="/`basename $$curtmp`$$toptmp"; \
+			     curtmp="`dirname $$curtmp`"; \
+			     itmp="`echo $$itmp | sed 's;\.\./;;'`"; \
+			  done \
+		    ;; \
+		esac; \
+		case "$$itmp" in \
+		*/?*/?*/?*/?*)	newtop=../../../../..;; \
+		*/?*/?*/?*)	newtop=../../../..;; \
+		*/?*/?*)	newtop=../../..;; \
+		*/?*)		newtop=../..;; \
+		*)		newtop=..;; \
+		esac; \
+		newtop="$$newtop$$toptmp"; \
+		case "$(TOP)" in \
+		/?*) imaketop=$(TOP) \
+		     imakeprefix= ;; \
+		.) imaketop=$$newtop \
+		   imakeprefix=$$newtop/ ;; \
+		*) imaketop=$$newtop/$(TOP) \
+		   imakeprefix=$$newtop/ ;; \
+		esac; \
+		$(RM) $$i/Makefile.bak; \
+		if [ -f $$i/Makefile ]; then \
+			echo "	$(MV) Makefile Makefile.bak"; \
+			if [ "$$executeit" != "no" ]; then \
+				$(MV) $$i/Makefile $$i/Makefile.bak; \
+			fi; \
+		fi; \
+		$(MAKE) $(MFLAGS) $(MAKE_OPTS) ONESUBDIR=$$i ONECURDIR=$$curdir IMAKETOP=$$imaketop IMAKEPREFIX=$$imakeprefix $$i/Makefile; \
+		if [ -d $$i ] ; then \
+			cd $$i; \
+			$(MAKE) $(MFLAGS) Makefiles; \
+			cd $$newtop; \
+		else \
+			exit 1; \
+		fi; \
+	done
+
+includes::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo including "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS)  includes; \
+	done
+
+distclean::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "cleaning" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS)  distclean; \
+	done
+
+    PREPROCESSMANPAGES = true
+
+distclean::
+	$(RM) Makefile Makefile.dep
+
+# ----------------------------------------------------------------------
+# dependencies generated by makedepend
+
Index: b/1.3.10-sparc.patch?view=markup
===================================================================
--- /dev/null
+++ b/1.3.10-sparc.patch?view=markup
@@ -0,0 +1,553 @@
+
+
+
+
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
+"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
+<!-- ViewCVS - http://viewcvs.sourceforge.net/
+by Greg Stein - mailto:gstein@lyra.org -->
+<head>
+<title>[gentoo-x86] View of /net-misc/tightvnc/files/1.3.10-sparc.patch</title>
+<meta name="generator" content="ViewCVS 1.0_pre20050929" />
+<link rel="stylesheet" href="/docroot/styles.css" type="text/css" />
+</head>
+<body>
+<div class="vc_navheader">
+
+<form method="get" action="/viewcvs.py/">
+
+<table style="padding:0.1em;">
+<tr>
+<td><strong>
+
+<a href="/viewcvs.py/gentoo-x86/">
+
+[gentoo-x86]</a>
+/
+
+<a href="/viewcvs.py/gentoo-x86/net-misc/">
+
+net-misc</a>
+/
+
+<a href="/viewcvs.py/gentoo-x86/net-misc/tightvnc/">
+
+tightvnc</a>
+/
+
+<a href="/viewcvs.py/gentoo-x86/net-misc/tightvnc/files/">
+
+files</a>
+/
+
+<a href="/viewcvs.py/gentoo-x86/net-misc/tightvnc/files/1.3.10-sparc.patch?view=log">
+
+1.3.10-sparc.patch</a>
+
+
+</strong></td>
+<td style="text-align:right;">
+
+
+<strong>Project Root:</strong>
+<select name="root" onchange="submit()">
+
+
+<option value="*viewroots*">Repository Listing</option>
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+<optgroup label="CVS Repositories"><option>gentoo</option><option>gentoo-projects</option><option>gentoo-src</option><option selected="selected">gentoo-x86</option></optgroup>
+
+
+<optgroup label="Subversion Repositories"><option>apache</option><option>autoepatch</option><option>baselayout</option><option>catalyst</option><option>devmanual</option><option>dietlibc</option><option>emacs</option><option>eselect</option><option>genkernel</option><option>gentoo-alt</option><option>gentoo-bashcomp</option><option>gentoo-dev-summary</option><option>gentoo-news</option><option>gentoo-perl</option><option>gentoo-python</option><option>gentoo-syntax</option><option>gentoo-vdr</option><option>gentoolkit</option><option>gli</option><option>glsr</option><option>hardened</option><option>hwdata</option><option>kde</option><option>keychain</option><option>linux-patches</option><option>livecd-tools</option><option>overlays</option><option>path-sandbox</option><option>php</option><option>planet</option><option>portage</option><option>pybugz</option><option>releng</option><option>sandbox</option><option>scire</option><option>votify</option><option>vps</option></optgroup>
+
+</select>
+<input type="submit" value="Go" />
+
+</td>
+</tr>
+</table>
+
+</form>
+
+</div>
+<h1><img style="float:right;" src="/docroot/images/gentoo-new.gif" alt="Gentoo" width="182" height="59" />View of /net-misc/tightvnc/files/1.3.10-sparc.patch</h1>
+
+<p style="margin:0;">
+<a href="/viewcvs.py/gentoo-x86/net-misc/tightvnc/files/"><img src="/docroot/images/back_small.png" width="16" height="16" alt="Parent Directory" /> Parent Directory</a>
+
+| <a href="/viewcvs.py/gentoo-x86/net-misc/tightvnc/files/1.3.10-sparc.patch?view=log"><img src="/docroot/images/text.png" alt="Revision Log" /> Revision Log</a>
+
+
+| <a href="/viewcvs.py/gentoo-x86/net-misc/tightvnc/files/1.3.10-sparc.patch?view=graph"><img src="/docroot/images/cvsgraph_16x16.png" alt="View Revision Graph" /> Revision Graph</a>
+
+</p>
+<hr />
+<div class="vc_summary">
+Revision: <strong>1.1</strong> -
+(<a href="/viewcvs.py/*checkout*/gentoo-x86/net-misc/tightvnc/files/1.3.10-sparc.patch?rev=1.1"><strong>download</strong></a>)
+
+(<a href="/viewcvs.py/gentoo-x86/net-misc/tightvnc/files/1.3.10-sparc.patch?annotate=1.1"><strong>annotate</strong></a>)
+
+<br /><em>Wed Nov  4 19:12:33 2009 UTC</em> (2 weeks, 1 day ago) by <em>armin76</em>
+
+<br />Branch: <strong>MAIN</strong>
+
+
+<br />CVS Tags: <strong>HEAD</strong>
+
+
+
+
+
+
+
+
+<pre class="vc_log">Add a patch to fix corruption on sparc
+(Portage version: 2.1.6.13/cvs/Linux ia64)
+</pre>
+
+</div>
+<div><pre>diff -ur vnc_unixsrc.orig/Xvnc/programs/Xserver/include/servermd.h vnc_unixsrc/Xvnc/programs/Xserver/include/servermd.h
+--- vnc_unixsrc.orig/Xvnc/programs/Xserver/include/servermd.h	2009-11-04 18:44:50.000000000 +0000
++++ vnc_unixsrc/Xvnc/programs/Xserver/include/servermd.h	2009-11-04 18:47:48.000000000 +0000
+@@ -421,6 +421,20 @@
+ 
+ #endif /* Linux/PPC */
+ 
++#if defined (linux) &amp;&amp; defined(__sparc__)
++
++#define IMAGE_BYTE_ORDER       MSBFirst
++#define BITMAP_BIT_ORDER       MSBFirst
++#define GLYPHPADBYTES          4
++#define GETLEFTBITS_ALIGNMENT  1
++
++#define AVOID_MEMORY_READ 
++#define LARGE_INSTRUCTION_CACHE
++#define FAST_CONSTANT_OFFSET_MODE
++#define SHARED_IDCACHE
++
++#endif /* Linux/sparc */
++
+ #if defined(__MACH__) &amp;&amp; defined(__POWERPC__)
+ 
+ #define IMAGE_BYTE_ORDER       MSBFirst</pre></div>
+
+<hr />
+<table>
+<tr>
+<td>
+<address><a href="mailto:www@gentoo.org">www@gentoo.org</a></address><br />
+Powered by <a href="http://viewcvs.sourceforge.net/">ViewCVS 1.0_pre20050929</a>
+</td>
+<td style="text-align:right;">
+<h3><a href="/docroot/help_rootview.html">ViewCVS and CVS Help</a></h3>
+</td>
+</tr>
+</table>
+</body>
+</html>
+
Index: b/vncserver
===================================================================
--- a/vncserver
+++ b/vncserver
@@ -1,5 +1,6 @@
 #!/usr/bin/perl
 #
+#  Copyright (C) 2004-2006,2008-2009 Ola Lundqvist <opal@debian.org>
 #  Copyright (C) 2002-2009 Constantin Kaplinsky.  All Rights Reserved.
 #  Copyright (C) 1999 AT&T Laboratories Cambridge.  All Rights Reserved.
 #
@@ -19,6 +20,13 @@
 #  USA.
 #
 
+# This file was heavily edited by
+#              Ola Lundqvist <opal@debian.org>
+#               Marcus Brinkmann <Marcus.Brinkmann@ruhr-uni-bochum.de>
+# Clean option by Dirk Eddelbuettel <edd@debian.org>
+
+# Please report all errors to Debian and not to ORL.
+
 #
 # vncserver - wrapper script to start an X VNC server.
 #
@@ -32,9 +40,11 @@
 $geometry = "1024x768";
 $depth = 24;
 $desktopName = "X";
-$vncClasses = "/usr/local/vnc/classes";
+if (-d "/usr/share/tightvnc-java") {
+    $vncClasses = "/usr/share/tightvnc-java";
+}
 $vncUserDir = "$ENV{HOME}/.vnc";
-$fontPath = "unix/:7100";
+#$fontPath = "unix/:7100";
 $authType = "-rfbauth $vncUserDir/passwd";
 
 # Read configuration from the system-wide and user files if present.
@@ -50,14 +60,50 @@ $defaultXStartup
     = ("#!/bin/sh\n\n".
        "xrdb \$HOME/.Xresources\n".
        "xsetroot -solid grey\n".
-       "xterm -geometry 80x24+10+10 -ls -title \"\$VNCDESKTOP Desktop\" &\n".
-       "twm &\n");
+       "#x-terminal-emulator -geometry 80x24+10+10 -ls -title \"\$VNCDESKTOP Desktop\" &\n".
+       "#x-window-manager &\n".
+       "# Fix to make GNOME work\n".
+       "export XKL_XMODMAP_DISABLE=1\n".
+       "/etc/X11/Xsession\n");
 
 $xauthorityFile = "$ENV{XAUTHORITY}";
 
+######## Adding configuration possibility ################
+$Config_file = "/etc/vnc.conf";
+&ReadConfigFile();
+$Config_file = "$ENV{HOME}/.vncrc";
+&ReadConfigFile();
+
+if (!$XFConfigPath) {
+  foreach ("/etc/X11/xorg.conf", "/etc/X11/XF86Config-4", "/etc/X11/XF86Config" ){
+      $XFConfigPath = $_;
+      last if ( -e $XFConfigPath );
+  }
+}
+if (!$fontPath) {
+  &ReadXFConfigFont;
+}
+if (!$fontPath) {
+  $fontPath = "/usr/share/fonts/X11/misc/,".
+              "/usr/share/fonts/X11/Type1/,".
+              "/usr/share/fonts/X11/75dpi/,".
+              "/usr/share/fonts/X11/100dpi/"
+}
+if (!$colorPath) {
+  &ReadXFConfigColor;
+}
+if (!$colorPath) {
+  foreach ("/etc/X11/rgb", "/usr/share/X11/rgb", "/usr/X11R6/lib/X11/rgb"){
+      $colorPath = $_;
+      last if ( -e "${colorPath}.txt" );
+  }
+}
+##########################################################
+
 $vncUserDirUnderTmp = ($vncUserDir =~ m|^/tmp/.+|) ? 1 : 0;
 $xstartup = ($vncUserDirUnderTmp) ?
   "$ENV{HOME}/.vncstartup" : "$vncUserDir/xstartup";
+$xstartup = $vncStartup if ($vncStartup);
 unless ($xauthorityFile) {
     if ($vncUserDirUnderTmp) {
         $xauthorityFile = "$vncUserDir/.Xauthority";
@@ -72,12 +118,23 @@ chop($host = `uname -n`);
 # Check command line options
 
 &ParseOptions("-geometry",1,"-depth",1,"-pixelformat",1,"-name",1,"-kill",1,
-	      "-help",0,"-h",0,"--help",0);
+	      "-help",0,"-h",0,"--help",0,
+	      "-clean",0, "-fp",1,
+              "-alwaysshared",0, "-nevershared",0,
+              "-httpport",1,"-basehttpport",1);
 
 &Usage() if ($opt{'-help'} || $opt{'-h'} || $opt{'--help'});
 
 &Kill() if ($opt{'-kill'});
 
+$useClasses = 0;
+if (defined $vncClasses) {
+  if(! -d $vncClasses) {
+    die "VNC class files can not be found at $vncClasses.";
+  }
+  $useClasses = 1;
+}
+
 # Uncomment this line if you want default geometry, depth and pixelformat
 # to match the current X display:
 # &GetXDisplayDefaults();
@@ -93,6 +150,25 @@ if ($opt{'-pixelformat'}) {
     $pixelformat = $opt{'-pixelformat'};
 }
 
+if ($opt{'-fp'}) {
+    @fontPathElements = split(/\s*,\s*/, "$opt{'-fp'}");
+
+    $fontPath = '';
+
+    foreach $i (0.."$#fontPathElements") {
+        $tempFontPath = $fontPathElements[$i];
+        if ($tempFontPath !~ m!^[^/]*/[^/]*:\d+$!) {
+            $tempFontPath =~ s/:unscaled$//;
+            if (-r "$tempFontPath/fonts.dir") {
+                $fontPath .= "$fontPathElements[$i],";
+            }
+        } else {
+            $fontPath .= "$fontPathElements[$i],";
+        }
+    }
+    chop $fontPath;
+}
+
 &CheckGeometryAndDepth();
 
 if ($opt{'-name'}) {
@@ -106,14 +182,14 @@ unless (-e $vncUserDir) {
         die "$prog: Could not create $vncUserDir.\n";
     }
 }
-($z,$z,$mode) = lstat("$vncUserDir");
+($z,$z,$mode) = stat("$vncUserDir");
 if (!-d _ || !-o _ || ($vncUserDirUnderTmp && ($mode & 0777) != 0700)) {
     die "$prog: Wrong type or access mode of $vncUserDir.\n";
 }
 
 # Make sure the user has a password.
 
-($z,$z,$mode) = lstat("$vncUserDir/passwd");
+($z,$z,$mode) = stat("$vncUserDir/passwd");
 if (-e _ && (!-f _ || !-o _)) {
     die "$prog: Wrong type or ownership on $vncUserDir/passwd.\n";
 }
@@ -159,9 +235,21 @@ system("xauth -f $xauthorityFile add $ho
 
 # Now start the X VNC Server
 
-$cmd = "Xvnc :$displayNumber";
+$cmd = "Xtightvnc :$displayNumber";
 $cmd .= " -desktop " . &quotedString($desktopName);
-$cmd .= " -httpd $vncClasses";
+if ($useClasses) {
+  $cmd .= " -httpd $vncClasses";
+  print ("Found $vncClasses for http connections.\n");
+  if ($opt{'-httpport'}) {
+    $cmd .= " -httpport $opt{'-httpport'}";
+    print ("Listening to $opt{'-httpport'} for http connections.\n");
+  }
+  elsif ($opt{'-basehttpport'}) {
+    my $v = $opt{'-basehttpport'} + $displayNumber;
+    print ("Listening to $v for http connections.\n");
+    $cmd .= " -httpport $v";
+  }
+}
 $cmd .= " -auth $xauthorityFile";
 $cmd .= " -geometry $geometry" if ($geometry);
 $cmd .= " -depth $depth" if ($depth);
@@ -171,6 +259,8 @@ $cmd .= " $authType";
 $cmd .= " -rfbport $vncPort";
 $cmd .= " -fp $fontPath" if ($fontPath);
 $cmd .= " -co $colorPath" if ($colorPath);
+$cmd .= " -alwaysshared" if ($opt{'-alwaysshared'});
+$cmd .= " -nevershared" if ($opt{'-nevershared'});
 
 foreach $arg (@ARGV) {
     $cmd .= " " . &quotedString($arg);
@@ -182,18 +272,18 @@ $cmd .= " >> " . &quotedString($desktopL
 $pidFile = "$vncUserDir/$host:$displayNumber.pid";
 system("$cmd & echo \$! >$pidFile");
 
-# Give Xvnc a chance to start up
+# Give Xtightvnc a chance to start up
 
 sleep(1);
 unless (kill 0, `cat $pidFile`) {
-    warn "Couldn't start Xvnc; trying default font path.\n";
+    warn "Couldn't start Xtightvnc; trying default font path.\n";
     warn "Please set correct fontPath in the $prog script.\n";
     $cmd =~ s@-fp [^ ]+@@;
     system("$cmd & echo \$! >$pidFile");
     sleep(1);
 }
 unless (kill 0, `cat $pidFile`) {
-    warn "Couldn't start Xvnc process.\n\n";
+    warn "Couldn't start Xtightvnc process.\n\n";
     open(LOG, "<$desktopLog");
     while (<LOG>) { print; }
     close(LOG);
@@ -231,6 +321,65 @@ system("$xstartup >> " . &quotedString($
 
 exit;
 
+############################ Debian functions #################################
+# I thank Manoj for the code below.
+#
+# ReadConfigFile reads in a config file and sets variables according to it.
+#
+
+sub ReadConfigFile
+{
+  open(CONFIG, "$Config_file") || return;
+  my $lineno = 0;
+  while (<CONFIG>) {
+      chomp;
+      $lineno++;
+      s/\#.*//og;
+      next if /^\s*$/og;
+      $_ .= ";" unless /;\s*$/;
+      if (/^\s*([^=]+)\s*=\s*(\S.*)$/o) {
+          my $ret = eval "$1=$2";
+          if ($@) {
+              print STDERR "Error parsing config file $Config_file!\n";
+              print STDERR "$lineno:$_\n";
+          }
+      }
+  }
+}
+
+sub ReadXFConfigFont
+{
+  open(CONFIG, "$XFConfigPath") || return;
+  my $lineno = 0;
+  while (<CONFIG>) {
+      chomp;
+      $lineno++;
+      s/\#.*//og;
+      next if /^\s*$/og;
+      if (/^\s*FontPath\s*"(\S.*)"\s*$/o) {
+          $fontPath .= "," if $fontPath;
+          $fontPath .= $1;
+      }
+  }
+}
+
+sub ReadXFConfigColor
+{
+  open(CONFIG, "$XFConfigPath") || return;
+  my $lineno = 0;
+  while (<CONFIG> && !$colorPath) {
+      chomp;
+      $lineno++;
+      s/\#.*//og;
+      next if /^\s*$/og;
+      if (/^\s*RgbPath\s*"(\S.*)"\s*$/o) {
+          $colorPath = $1;
+      }
+  }
+}
+
+
+########## End of debian functions ###########
 
 ###############################################################################
 #
@@ -296,7 +445,8 @@ sub CheckDisplayNumber
 
     socket(S, $AF_INET, $SOCK_STREAM, 0) || die "$prog: socket failed: $!\n";
     eval 'setsockopt(S, &SOL_SOCKET, &SO_REUSEADDR, pack("l", 1))';
-    unless (bind(S, pack('S n x12', $AF_INET, 6000 + $n))) {
+    #unless (bind(S, pack('S n x12', $AF_INET, 6000 + $n))) {
+    unless (bind(S, sockaddr_in(6000 + $n, &INADDR_ANY))) {
 	close(S);
 	return 0;
     }
@@ -304,7 +454,8 @@ sub CheckDisplayNumber
 
     socket(S, $AF_INET, $SOCK_STREAM, 0) || die "$prog: socket failed: $!\n";
     eval 'setsockopt(S, &SOL_SOCKET, &SO_REUSEADDR, pack("l", 1))';
-    unless (bind(S, pack('S n x12', $AF_INET, 5900 + $n))) {
+    #unless (bind(S, pack('S n x12', $AF_INET, 5900 + $n))) {
+    unless (bind(S, sockaddr_in(5900 + $n, &INADDR_ANY))) {
 	close(S);
 	return 0;
     }
@@ -442,15 +593,19 @@ sub Usage
 	"Usage: $prog [<OPTIONS>] [:<DISPLAY#>]\n".
 	"       $prog -kill :<DISPLAY#>\n".
 	"\n".
-	"<OPTIONS> are Xvnc options, or:\n".
+	"<OPTIONS> are Xtightvnc options, or:\n".
 	"\n".
 	"        -name <DESKTOP-NAME>\n".
 	"        -depth <DEPTH>\n".
 	"        -geometry <WIDTH>x<HEIGHT>\n".
+        "        -httpport number\n".
+        "        -basehttpport number\n".
+        "        -alwaysshared\n".
+        "        -nevershared\n".
 	"        -pixelformat rgb<NNN>\n".
 	"        -pixelformat bgr<NNN>\n".
 	"\n".
-	"See vncserver and Xvnc manual pages for more information.\n");
+	"See vncserver and Xtightvnc manual pages for more information.\n");
 }
 
 
@@ -474,14 +629,18 @@ sub Kill
 
     unless (-r $pidFile) {
 	die "\nCan't find file $pidFile\n".
-	    "You'll have to kill the Xvnc process manually\n\n";
+	    "You'll have to kill the Xtightvnc process manually\n\n";
     }
 
     $SIG{'HUP'} = 'IGNORE';
     chop($pid = `cat $pidFile`);
-    warn "Killing Xvnc process ID $pid\n";
+    warn "Killing Xtightvnc process ID $pid\n";
     system("kill $pid");
     unlink $pidFile;
+
+    ## If option -clean is given, also remove the logfile
+    unlink "$vncUserDir/$host$opt{'-kill'}.log" if ($opt{'-clean'});
+
     exit;
 }
 
@@ -549,7 +708,7 @@ sub SanityCheck
     #
 
  cmd:
-    foreach $cmd ("uname","xauth","Xvnc","vncpasswd") {
+    foreach $cmd ("uname","xauth","Xtightvnc","vncpasswd") {
 	for (split(/:/,$ENV{PATH})) {
 	    if (-x "$_/$cmd") {
 		next cmd;
Index: b/Xvnc/Makefile
===================================================================
--- a/Xvnc/Makefile
+++ b/Xvnc/Makefile
@@ -1,193 +1,1336 @@
-# $XConsortium: Makefile /main/36 1996/11/13 14:42:50 lehors $
-# $XFree86: xc/Makefile,v 3.6.2.2 1998/02/07 00:44:32 dawes Exp $
+# Makefile generated by imake - do not edit!
+# $Xorg: imake.c,v 1.6 2001/02/09 02:03:15 xorgcvs Exp $
 
-# Luna users will need to either run make as "make MAKE=make"
-# or add "MAKE = make" to this file.
+# ----------------------------------------------------------------------
+# Makefile generated from "Imake.tmpl" and <Imakefile>
+# $Xorg: Imake.tmpl,v 1.4 2000/08/17 19:41:46 cpqbld Exp $
+# $XdotOrg: xc/config/cf/Imake.tmpl,v 1.9 2005/01/24 06:37:31 daniels Exp $
+#
+#
+#
+#
+# $XFree86: xc/config/cf/Imake.tmpl,v 3.155 2003/12/24 18:58:41 dickey Exp $
+# ----------------------------------------------------------------------
+
+all::
+
+.SUFFIXES: .i
+
+# $XdotOrg: xc/config/cf/Imake.cf,v 1.7 2005/03/02 11:20:29 gisburn Exp $
+# $Xorg: Imake.cf,v 1.4 2000/08/17 19:41:45 cpqbld Exp $
+
+# $XFree86: xc/config/cf/Imake.cf,v 3.88 2003/12/16 21:30:21 herrb Exp $
+
+# Keep cpp from replacing path elements containing i486/i586/i686
+
+# -----------------------------------------------------------------------
+# site-specific configuration parameters that need to come before
+# the platform-specific parameters - edit site.def to change
+
+# site:  $TOG: site.sample /main/r64_final/1 1998/02/05 16:28:49 kaleb $
+
+# site:  $XFree86: xc/config/cf/site.def,v 3.24 2000/06/25 20:17:29 dawes Exp $
+
+# $XFree86: xc/config/cf/xf86site.def,v 3.186 2003/06/25 18:06:22 eich Exp $
+
+# ----------------------------------------------------------------------
+# platform-specific configuration parameters - edit linux.cf to change
+
+# $XdotOrg: xc/config/cf/linux.cf,v 1.24 2005/03/06 01:05:00 branden Exp $
+# platform:  $Xorg: linux.cf,v 1.3 2000/08/17 19:41:47 cpqbld Exp $
+
+# platform:  $XFree86: xc/config/cf/linux.cf,v 3.220 2003/12/30 22:38:33 tsi Exp $
+
+# operating system:  Linux 2.6.32-trunk-686-bigmem i686 [ELF] (2.6.32)
+# libc:	(6.10.2)
+# binutils:	(220)
+
+# $Xorg: lnxLib.rules,v 1.3 2000/08/17 19:41:47 cpqbld Exp $
+# $XFree86: xc/config/cf/lnxLib.rules,v 3.52 2003/10/31 20:49:03 herrb Exp $
+
+# $XdotOrg: xc/config/cf/xorg.cf,v 1.44 2005/01/27 03:50:46 ajax Exp $
+
+# $Xorg: xfree86.cf,v 1.4 2000/08/17 19:41:49 cpqbld Exp $
+
+XORG_VERSION_CURRENT = (((6) * 10000000) + ((9) * 100000) + ((0) * 1000) + 0)
+RELEASE_VERSION = RELEASE-1
+
+AFB_DEFS = -DUSE_AFB
+
+DRIVERSDKDIR = $(USRLIBDIR)/Server
+DRIVERSDKMODULEDIR = $(USRLIBDIR)/Server/modules
+DRIVERSDKINCLUDEDIR = $(USRLIBDIR)/Server/include
+
+       XF86SRC = $(SERVERSRC)/hw/xfree86
+    XF86COMSRC = $(XF86SRC)/common
+ XF86PARSERSRC = $(XF86SRC)/parser
+     XF86OSSRC = $(XF86SRC)/os-support
+ XF86DRIVERSRC = $(XF86SRC)/drivers
+     DRIVERSRC = $(XF86DRIVERSRC)
+
+        XFREE86DOCDIR = $(DOCDIR)
+      XFREE86PSDOCDIR = $(DOCPSDIR)
+     XFREE86PDFDOCDIR = $(DOCPDFDIR)
+    XFREE86HTMLDOCDIR = $(DOCHTMLDIR)
+XFREE86JAPANESEDOCDIR = $(DOCDIR)/Japanese
+
+# $Xorg: xf86.rules,v 1.3 2000/08/17 19:41:48 cpqbld Exp $
+
+# $XFree86: xc/config/cf/xf86.rules,v 3.34tsi Exp $
+
+   SELINUX_LDFLAGS =
+
+   SELINUX_INCLUDES = -I/usr/include/selinux
+
+   SELINUX_CFLAGS =  -DHAVE_SELINUX
+
+   SELINUX_LIBS = -lselinux
+
+# ----------------------------------------------------------------------
+# site-specific configuration parameters that go after
+# the platform-specific parameters - edit site.def to change
+
+# site:  $TOG: site.sample /main/r64_final/1 1998/02/05 16:28:49 kaleb $
+
+# site:  $XFree86: xc/config/cf/site.def,v 3.24 2000/06/25 20:17:29 dawes Exp $
+
+# ---------------------------------------------------------------------
+# Imake rules for building libraries, programs, scripts, and data files
+# rules:  $Xorg: Imake.rules,v 1.3 2000/08/17 19:41:46 cpqbld Exp $
+# rules:  $XdotOrg: xc/config/cf/Imake.rules,v 1.8 2005/02/01 22:27:00 ajax Exp $
+#
+#
+#
+#
+# rules:  $XFree86: xc/config/cf/Imake.rules,v 3.128 2003/11/15 03:25:17 dawes Exp $
+
+.PHONY: all interfaces install install.man install.lib install.sdk 	depend includes cleandir
+
+ _NULLCMD_ = @ echo -n
+
+X_BYTE_ORDER = X_LITTLE_ENDIAN
+
+GLIDE2INCDIR = /usr/include/glide
+
+GLIDE3INCDIR = /usr/include/glide3
+
+GLIDE3LIBNAME = glide3
+
+TKLIBNAME = tk8.4
+
+TKLIBDIR = /usr/lib
+
+TCLLIBNAME = tcl8.4
+
+TCLIBDIR = /usr/lib
+
+          PATHSEP = /
+            SHELL = /bin/sh -e
+
+              TOP = .
+      CURRENT_DIR = .
+
+            IMAKE = imake
+           DEPEND = gccmakedep
+        MKDIRHIER = mkdir -p
+          REVPATH = revpath
+    EXPORTLISTGEN =
+             RMAN = /usr/bin/rman
+     RMANBASENAME = rman
+      RMANOPTIONS =
+        CONFIGSRC = $(TOP)/config
+         IMAKESRC = $(CONFIGSRC)/imake
+        DEPENDSRC = $(CONFIGSRC)/util
+
+          INCROOT = /usr/include
+        USRLIBDIR = /usr/lib
+           VARDIR = /var
+        VARLIBDIR = $(VARDIR)/lib
+  SYSTEMUSRLIBDIR = /usr/lib
+  SYSTEMUSRINCDIR = /usr/include
+         SHLIBDIR = /usr/lib
+       LINTLIBDIR = $(USRLIBDIR)/lint
+          MANPATH = /usr/share/man
+    MANSOURCEPATH = $(MANPATH)/man
+           MANDIR = $(MANSOURCEPATH)$(MANSECT)
+    SYSCALLMANDIR = $(MANSOURCEPATH)$(SYSCALLMANSECT)
+        LIBMANDIR = $(MANSOURCEPATH)$(LIBMANSECT)
+     DRIVERMANDIR = $(MANSOURCEPATH)4
+       FILEMANDIR = $(MANSOURCEPATH)$(FILEMANSECT)
+       GAMEMANDIR = $(MANSOURCEPATH)$(GAMEMANSECT)
+       MISCMANDIR = $(MANSOURCEPATH)7
+        ADMMANDIR = $(MANSOURCEPATH)$(ADMMANSECT)
+	  ICONDIR = "/usr/share/icons"
+      XCURSORPATH = "~/.icons:/usr/share/icons:/usr/share/pixmaps"
+     DRIVERMANDIR = $(MANSOURCEPATH)4
+     LOGDIRECTORY = $(VARDIR)/log
+
+        VARRUNDIR = $(VARDIR)/run
+
+         VARDBDIR = $(VARDIR)/lib
+
+               AR = ar clq
+
+# Nice try but useless: make will inherit BOOTSTRAPCFLAGS
+# from  top Makefile
+  BOOTSTRAPCFLAGS =
+
+               CC = gcc -m32
+               AS = gcc -m32 -c -x assembler
+
+.SUFFIXES: .cc
+
+              CXX = c++ -m32
+
+          CXXFILT = c++filt
+
+           CXXLIB = -lstdc++
+
+    CXXDEBUGFLAGS = -g -O2 -fno-strict-aliasing
+CXXDEPENDINCLUDES =
+ CXXEXTRA_DEFINES =
+CXXEXTRA_INCLUDES =
+   CXXSTD_DEFINES = -Dlinux -D__i386__ -D_POSIX_C_SOURCE=199309L 				-D_POSIX_SOURCE -D_XOPEN_SOURCE 				-D_BSD_SOURCE -D_SVID_SOURCE                                 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 				  				 $(CXXPROJECT_DEFINES)
+       CXXOPTIONS =
+      CXXINCLUDES = $(INCLUDES) $(TOP_INCLUDES) $(CXXEXTRA_INCLUDES)
+       CXXDEFINES = $(CXXINCLUDES) $(CXXSTD_DEFINES) $(THREADS_CXXDEFINES) $(DEFINES) $(CXXEXTRA_DEFINES)
+         CXXFLAGS = $(CXXDEBUGFLAGS) $(CXXOPTIONS) $(THREADS_CXXFLAGS) $(CXXDEFINES)
+
+         COMPRESS = compress
+          GZIPCMD = gzip
+
+              CPP = cpp $(STD_CPP_DEFINES)
+           RAWCPP = cpp -undef $(STD_CPP_OPTIONS)
+    PREPROCESSCMD = gcc -m32 -E $(STD_CPP_DEFINES)
+
+          INSTALL = install
+     INSTALLFLAGS = -c
+
+               LD = gcc -m32 -nostdlib
+
+              LEX = flex -l
+               M4 = m4
+          M4FLAGS =
+           LEXLIB = -lfl
+             YACC = bison -y
+           CCYACC = bison -y
+
+             LINT = lint
+
+      LINTLIBFLAG = -C
+         LINTOPTS = -axz
+               LN = ln -s
+             MAKE = make
+               MV = mv -f
+               CP = cp
+
+           RANLIB = ranlib
+
+  RANLIBINSTFLAGS =
+
+               RM = rm -f
+             PERL = perl
+         PERLOPTS =
+     PERLENVSETUP = env LC_ALL=C
+
+          MANSECT = 1
+   SYSCALLMANSECT = 2
+       LIBMANSECT = 3
+    DRIVERMANSECT = 4
+      FILEMANSECT = 5
+      GAMEMANSECT = 6
+      MISCMANSECT = 7
+       ADMMANSECT = 8
+       MANSRCSECT = s
+       MANNEWSECT = n
+ PROJECTMANSUFFIX = x
+        MANSUFFIX = $(MANSECT)$(PROJECTMANSUFFIX)
+ SYSCALLMANSUFFIX = $(SYSCALLMANSECT)$(PROJECTMANSUFFIX)
+     LIBMANSUFFIX = $(LIBMANSECT)$(PROJECTMANSUFFIX)
+  DRIVERMANSUFFIX = 4x
+    FILEMANSUFFIX = $(FILEMANSECT)$(PROJECTMANSUFFIX)
+    GAMEMANSUFFIX = $(GAMEMANSECT)$(PROJECTMANSUFFIX)
+    MISCMANSUFFIX = 7x
+     ADMMANSUFFIX = $(ADMMANSECT)$(PROJECTMANSUFFIX)
+   ADMINMANSUFFIX = 8
+     MANSRCSUFFIX = man
+     MANNEWSUFFIX = _man
+          MANDEFS = -D__apploaddir__=$(XAPPLOADDIR) -D__filemansuffix__=$(FILEMANSECT)$(PROJECTMANSUFFIX) -D__osfilemansuffix__=$(FILEMANSECT) -D__libmansuffix__=$(LIBMANSECT)$(PROJECTMANSUFFIX) -D__oslibmansuffix__=$(LIBMANSECT) -D__mansuffix__=$(MANSECT)$(PROJECTMANSUFFIX) -D__osmansuffix__=$(MANSECT) -D__syscallmansuffix__=$(SYSCALLMANSECT)$(PROJECTMANSUFFIX) -D__ossysmansuffix__=$(SYSCALLMANSECT) -D__gamemansuffix__=$(GAMEMANSECT)$(PROJECTMANSUFFIX) -D__osgamemansuffix__=$(GAMEMANSECT) -D__miscmansuffix__=$(MISCMANSECT)$(PROJECTMANSUFFIX) -D__osmiscmansuffix__=$(MISCMANSECT) -D__admmansuffix__=$(ADMMANSECT)$(PROJECTMANSUFFIX) -D__osadmmansuffix__=$(ADMMANSECT) -D__miscmansuffix__=$(MISCMANSECT)$(PROJECTMANSUFFIX) -D__osmiscmansuffix__=$(MISCMANSECT) -D__drivermansuffix__=$(DRIVERMANSECT)$(PROJECTMANSUFFIX) -D__osdrivermansuffix__=$(DRIVERMANSECT) -D__adminmansuffix__=$(ADMINMANSUFFIX) -D__projectroot__=$(PROJECTROOT) -D__xconfigfile__=$(XCONFIGFILE) -D__xconfigdir__=$(XCONFIGDIR) -D__xlogfile__=$(XLOGFILE) -D__xservername__=$(XSERVERNAME) -D__appmansuffix__=$(MANSECT)$(PROJECTMANSUFFIX) $(XORGMANDEFS) $(VENDORMANDEFS)
+
+   COMPRESSMANCMD = gzip -n
+
+            TROFF = groff -Tps
+            NROFF = nroff
+
+         MSMACROS = -ms
+        MANMACROS = -man
+              TBL = tbl
+              EQN = eqn
+             NEQN = neqn
+              COL = col
+         COLFLAGS = -b
+
+            MODCC = gcc -m32
+
+           MODCPP = cpp
+        MODCFLAGS = $(CFLAGS)
+            MODAS = gcc -m32 -c -x assembler
+       MODASFLAGS =
+
+            MODLD = gcc -m32 -nostdlib
+
+       MODLDFLAGS =
+MODLDCOMBINEFLAGS = -r
+            MODAR = ar clq
+
+        MODRANLIB = ranlib
+
+            DVIPS = dvips
+            LATEX = latex
+
+     STD_INCLUDES =
+  STD_CPP_OPTIONS = -traditional
+  STD_CPP_DEFINES = -traditional -Dlinux -D__i386__ -D_POSIX_C_SOURCE=199309L 				-D_POSIX_SOURCE -D_XOPEN_SOURCE 				-D_BSD_SOURCE -D_SVID_SOURCE                                 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 				  				 $(PROJECT_DEFINES)
+      STD_DEFINES = -Dlinux -D__i386__ -D_POSIX_C_SOURCE=199309L 				-D_POSIX_SOURCE -D_XOPEN_SOURCE 				-D_BSD_SOURCE -D_SVID_SOURCE                                 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 				  				 $(PROJECT_DEFINES)
+ EXTRA_LOAD_FLAGS =
+  EXTRA_LDOPTIONS =
+  EXTRA_LIBRARIES =
+             TAGS = ctags
+
+   PARALLELMFLAGS =
+
+    SHAREDCODEDEF =
+         SHLIBDEF =
+
+     SHLIBLDFLAGS = -shared $(SHLIBGLOBALSFLAGS)
+
+         NOSTDLIB = -nostdlib
+     POSTNOSTDLIB = -Wl,-Bstatic -lgcc -Wl,-Bdynamic
+
+         PICFLAGS = -fPIC
+
+      CXXPICFLAGS = -fPIC
+
+    PROTO_DEFINES = -DFUNCPROTO=15 -DNARROWPROTO
+
+     INSTPGMFLAGS =
+
+     INSTBINFLAGS = -m 0755
+     INSTUIDFLAGS = -m 4711
+     INSTLIBFLAGS = -m 0644
+     INSTINCFLAGS = -m 0444
+     INSTMANFLAGS = -m 0444
+     INSTDATFLAGS = -m 0444
+    INSTKMEMFLAGS = -m 4711
+
+      PROJECTROOT = /usr
+
+      CDEBUGFLAGS = -g -O2 -fno-strict-aliasing
+        CCOPTIONS =
+
+      ALLINCLUDES = $(INCLUDES) $(EXTRA_INCLUDES) $(TOP_INCLUDES) $(INSTALLED_INCLUDES) $(STD_INCLUDES)
+       ALLDEFINES = $(ALLINCLUDES) $(STD_DEFINES) $(PROTO_DEFINES) $(THREADS_DEFINES) $(MODULE_DEFINES) $(DEFINES) $(EXTRA_DEFINES)
+           CFLAGS = $(CDEBUGFLAGS) $(CCOPTIONS) $(THREADS_CFLAGS) $(MODULE_CFLAGS) $(ALLDEFINES)
+        LINTFLAGS = $(LINTOPTS) -DLINT $(ALLDEFINES) $(DEPEND_DEFINES)
+         LDPRELIB =  $(INSTALLED_LIBS)
+        LDPOSTLIB =
+        LDOPTIONS = $(CDEBUGFLAGS) $(CCOPTIONS)  $(EXTRA_LDOPTIONS) $(THREADS_LDFLAGS) $(LOCAL_LDFLAGS) $(LDPRELIBS)
+     CXXLDOPTIONS = $(CXXDEBUGFLAGS) $(CXXOPTIONS) $(EXTRA_LDOPTIONS) $(THREADS_CXXLDFLAGS) $(LOCAL_LDFLAGS) $(LDPRELIBS)
+
+           LDLIBS = $(LDPOSTLIBS) $(THREADS_LIBS) $(SYS_LIBRARIES) $(EXTRA_LIBRARIES)
+
+           CCLINK = $(CC)
+
+          CXXLINK = $(CXX)
+
+     LDSTRIPFLAGS = -x
+   LDCOMBINEFLAGS = -r
+      DEPENDFLAGS =
+   DEPEND_DEFINES =
+
+# Not sure this belongs here
+         TKLIBDIR = /usr/lib
+         TKINCDIR = /usr/include
+        TKLIBNAME = tk8.4
+        TKLIBRARY = -L$(TKLIBDIR) -l$(TKLIBNAME)
+        TCLLIBDIR = /usr/lib
+        TCLINCDIR = /usr/include
+       TCLLIBNAME = tcl8.4
+       TCLLIBRARY = -L$(TCLLIBDIR) -l$(TCLLIBNAME)
+
+        MACROFILE = linux.cf
+           RM_CMD = $(RM)
+
+    IMAKE_DEFINES =
+   IMAKE_WARNINGS = -Wundef
+
+         IRULESRC = $(CONFIGDIR)
+        IMAKE_CMD = $(IMAKE) -DUseInstalled -I$(IRULESRC) $(IMAKE_DEFINES) 		    $(IMAKE_WARNINGS)
+
+     ICONFIGFILES = $(IRULESRC)/Imake.tmpl $(IRULESRC)/X11.tmpl 			$(IRULESRC)/site.def $(IRULESRC)/$(MACROFILE) 			$(IRULESRC)/xfree86.cf $(IRULESRC)/xf86.rules $(IRULESRC)/xorgsite.def $(IRULESRC)/host.def $(EXTRA_ICONFIGFILES)
+
+# $Xorg: X11.rules,v 1.4 2000/08/17 19:41:46 cpqbld Exp $
+
+# $XFree86: xc/config/cf/X11.rules,v 1.6 2001/01/17 16:22:31 dawes Exp $
+
+# ----------------------------------------------------------------------
+# X Window System Build Parameters and Rules
+# $XdotOrg: xc/config/cf/X11.tmpl,v 1.52 2005/09/22 23:54:18 alanc Exp $
+# $Xorg: X11.tmpl,v 1.6 2000/08/17 19:41:46 cpqbld Exp $
+#
+#
+#
+#
+# $XFree86: xc/config/cf/X11.tmpl,v 1.248 2004/02/16 04:07:37 dawes Exp $
+
+XORGRELSTRING = `echo 6 9 0 | sed -e 's/ /./g' -e 's/^/Version\\\ /'`
+  XORGMANNAME = X Version 11
+
+STICKY_DEFINES = -DHAS_STICKY_DIR_BIT
+
+FCHOWN_DEFINES = -DHAS_FCHOWN
+
+# -----------------------------------------------------------------------
+# X Window System make variables; these need to be coordinated with rules
+
+             XTOP = $(TOP)
+           BINDIR = /usr/bin
+     BUILDINCROOT = $(TOP)/exports
+      BUILDINCDIR = $(BUILDINCROOT)/include
+      BUILDINCTOP = ../..
+      BUILDLIBDIR = $(TOP)/exports/lib
+      BUILDLIBTOP = ../..
+      BUILDBINDIR = $(TOP)/exports/bin
+      BUILDBINTOP = ../..
+   BUILDMODULEDIR = $(BUILDLIBDIR)/modules
+     BUILDI18NDIR = $(BUILDLIBDIR)/locale
+   BUILDMODULETOP = $(BUILDLIBTOP)/..
+    XBUILDINCROOT = $(XTOP)/exports
+     XBUILDINCDIR = $(XBUILDINCROOT)/include/X11
+     XBUILDINCTOP = ../../..
+     XBUILDBINDIR = $(XBUILDINCROOT)/bin
+           INCDIR = $(INCROOT)
+           ADMDIR = /usr/adm
+           LIBDIR = /usr/lib/X11
+         SHAREDIR = /usr/share/X11
+       LIBEXECDIR = /usr/libexec
+        MODULEDIR = $(USRLIBDIR)/modules
+   TOP_X_INCLUDES =
+          XBINDIR = $(PROJECTROOT)/bin
+
+       INSTSRCDIR = /usr/src
+
+        ETCX11DIR = /etc/X11
+
+          CONFDIR = $(ETCX11DIR)
+
+           DOCDIR = $(LIBDIR)/doc
+       DOCHTMLDIR = $(DOCDIR)/html
+         DOCPSDIR = $(DOCDIR)/PostScript
+        DOCPDFDIR = $(DOCDIR)/PDF
+          FONTDIR = /usr/share/fonts/X11
+     ENCODINGSDIR = /usr/share/fonts/X11/encodings
+         XINITDIR = $(LIBDIR)/xinit
+           XDMDIR = $(LIBDIR)/xdm
+        XDMVARDIR = $(VARLIBDIR)/xdm
+           TWMDIR = $(LIBDIR)/twm
+           XSMDIR = $(LIBDIR)/xsm
+           NLSDIR = $(LIBDIR)/nls
+       XLOCALEDIR = $(LIBDIR)/locale
+      LBXPROXYDIR = $(LIBDIR)/lbxproxy
+  PROXYMANAGERDIR = $(LIBDIR)/proxymngr
+        XPRINTDIR = $(LIBDIR)/xserver
+      XAPPLOADDIR = /etc/X11/app-defaults
+       FONTCFLAGS = -t
+
+     INSTAPPFLAGS = $(INSTDATFLAGS)
+
+              RGB = $(XBINDIR)/rgb
+            FONTC = $(XBINDIR)/bdftopcf
+      MKFONTSCALE = $(XBINDIR)/mkfontscale
+        MKFONTDIR = $(XBINDIR)/mkfontdir
+      MKHTMLINDEX = $(XBINDIR)/mkhtmlindex
+          UCS2ANY = $(XBINDIR)/ucs2any
+      BDFTRUNCATE = $(XBINDIR)/bdftruncate
+     UCSMAPPREFIX = $(FONTDIR)/util/map-
+       XCURSORGEN = $(XBINDIR)/xcursorgen
+
+     HTMLINDEXCMD = HtmlIndexCmd
+
+       DOCUTILSRC = $(XTOP)/doc/util
+        CLIENTSRC = $(TOP)/clients
+          DEMOSRC = $(TOP)/demos
+       XDOCMACROS = $(DOCUTILSRC)/macros.t
+       XIDXMACROS = $(DOCUTILSRC)/indexmacros.t
+       PROGRAMSRC = $(TOP)/programs
+           LIBSRC = $(XTOP)/lib
+          FONTSRC = $(XTOP)/fonts
+     ENCODINGSSRC = $(FONTSRC)/encodings
+       INCLUDESRC = $(BUILDINCROOT)/include
+      XINCLUDESRC = $(INCLUDESRC)/X11
+        SERVERSRC = $(XTOP)/programs/Xserver
+       CONTRIBSRC = $(XTOP)/../contrib
+   UNSUPPORTEDSRC = $(XTOP)/unsupported
+           DOCSRC = $(XTOP)/doc
+           RGBSRC = $(XTOP)/programs/rgb
+      BDFTOPCFSRC = $(PROGRAMSRC)/bdftopcf
+     MKFONTDIRSRC = $(PROGRAMSRC)/mkfontdir
+    FONTSERVERSRC = $(PROGRAMSRC)/xfs
+       FONTINCSRC = $(XTOP)/include/fonts
+        EXTINCSRC = $(XTOP)/include/extensions
+      FTSOURCEDIR = FreeTypeSrcDir
+        DRMSRCDIR = $(TOP)/extras/drm
+       MESASRCDIR = $(TOP)/extras/Mesa
+  OGLSAMPLESRCDIR = $(TOP)/extras/ogl-sample
+        PSWRAPSRC = $(XTOP)/config/pswrap
+     TRANSCOMMSRC = $(LIBSRC)/xtrans
+   TRANS_INCLUDES = -I$(TRANSCOMMSRC)
+ CONNECTION_FLAGS = -DUNIXCONN -DTCPCONN $(STICKY_DEFINES) $(FCHOWN_DEFINES) -DIPv6
+XTRANS_FAILDEFINES = -DFAIL_HARD
+
+    VENDORMANNAME = X.Org
+ VENDORMANVERSION = `echo 6 9 0 | sed -e 's/ /./g' -e 's/^/Version\\\ /'`
+      XORGMANDEFS = -D__xorgversion__="\"$(XORGRELSTRING)\" \"$(XORGMANNAME)\""
+    VENDORMANDEFS = -D__vendorversion__="$(VENDORMANVERSION) $(VENDORMANNAME)"
+       VENDORNAME = The X.Org Foundation
+  VENDORNAMESHORT = X.Org
+
+ VENDORWEBSUPPORT = http://wiki.X.Org
+
+VENDORSUPPORTDEFS = -D__VENDORDWEBSUPPORT__='"$(VENDORWEBSUPPORT)"'
+
+      XKBDEFRULES = xorg
+  XKBDEFRULESDEFS = -D__XKBDEFRULES__='"$(XKBDEFRULES)"'
+
+     XCONFIGFILE = xorg.conf
+      XCONFIGDIR = $(LIBDIR)
+        XLOGFILE = Xorg
+     XSERVERNAME = Xorg
+
+       XENVLIBDIR = $(USRLIBDIR)
+   CLIENTENVSETUP = LD_LIBRARY_PATH=$(XENVLIBDIR) XLOCALEDIR=$(BUILDLIBDIR)/locale
+
+# $Xorg: lnxLib.tmpl,v 1.3 2000/08/17 19:41:47 cpqbld Exp $
+# $XFree86: xc/config/cf/lnxLib.tmpl,v 3.19 2003/10/15 22:47:48 herrb Exp $
+
+          XLIBSRC = $(LIBSRC)/X11
+
+SOXLIBREV = 6.2
+DEPXONLYLIB =
+XONLYLIB =  -lX11
+
+LINTXONLY = $(LINTLIBDIR)/llib-lX11.ln
+
+      DEPXLIBONLY = $(DEPXONLYLIB)
+         XLIBONLY = $(XONLYLIB)
+     LINTXONLYLIB = $(LINTXONLY)
+
+      XEXTLIBSRC = $(LIBSRC)/Xext
+
+SOXEXTREV = 6.4
+DEPEXTENSIONLIB =
+EXTENSIONLIB =  -lXext
+
+LINTEXTENSION = $(LINTLIBDIR)/llib-lXext.ln
+
+LINTEXTENSIONLIB = $(LINTEXTENSION)
+          DEPXLIB = $(DEPEXTENSIONLIB) $(DEPXONLYLIB)
+             XLIB = $(EXTENSIONLIB) $(XONLYLIB)
+         LINTXLIB = $(LINTXONLYLIB)
+
+    XSSLIBSRC = $(LIBSRC)/Xss
+
+SOXSSREV = 1.0
+DEPXSSLIB =
+XSSLIB =  -lXss
+
+LINTXSS = $(LINTLIBDIR)/llib-lXss.ln
+
+    XXF86MISCLIBSRC = $(LIBSRC)/Xxf86misc
+
+SOXXF86MISCREV = 1.1
+DEPXXF86MISCLIB =
+XXF86MISCLIB =  -lXxf86misc
+
+LINTXXF86MISC = $(LINTLIBDIR)/llib-lXxf86misc.ln
+
+    XXF86VMLIBSRC = $(LIBSRC)/Xxf86vm
+
+SOXXF86VMREV = 1.0
+DEPXXF86VMLIB =
+XXF86VMLIB =  -lXxf86vm
+
+LINTXXF86VM = $(LINTLIBDIR)/llib-lXxf86vm.ln
+
+    XXF86DGALIBSRC = $(LIBSRC)/Xxf86dga
+
+SOXXF86DGAREV = 1.0
+DEPXXF86DGALIB =
+XXF86DGALIB =  -lXxf86dga
+
+LINTXXF86DGA = $(LINTLIBDIR)/llib-lXxf86dga.ln
+
+    XXF86RUSHLIBSRC = $(LIBSRC)/Xxf86rush
+
+SOXXF86RUSHREV = 1.0
+DEPXXF86RUSHLIB =
+XXF86RUSHLIB =  -lXxf86rush
+
+LINTXXF86RUSH = $(LINTLIBDIR)/llib-lXxf86rush.ln
+
+    XVLIBSRC = $(LIBSRC)/Xv
+
+SOXVREV = 1.0
+DEPXVLIB =
+XVLIB =  -lXv
+
+LINTXV = $(LINTLIBDIR)/llib-lXv.ln
+
+    XVMCLIBSRC = $(LIBSRC)/XvMC
+
+SOXVMCREV = 1.0
+DEPXVMCLIB =
+XVMCLIB =  -lXvMC
+
+LINTXVMC = $(LINTLIBDIR)/llib-lXvMC.ln
+
+    XINERAMALIBSRC = $(LIBSRC)/Xinerama
+
+SOXINERAMAREV = 1.0
+DEPXINERAMALIB =
+XINERAMALIB =  -lXinerama
+
+LINTXINERAMA = $(LINTLIBDIR)/llib-lXinerama.ln
+
+    XRESLIBSRC = $(LIBSRC)/XRes
+
+SOXRESREV = 1.0
+DEPXRESLIB =
+XRESLIB =  -lXRes
+
+LINTXRES = $(LINTLIBDIR)/llib-lXRes.ln
+
+    DMXLIBSRC = $(LIBSRC)/dmx
+
+SODMXREV = 1.0
+DEPDMXLIB =
+DMXLIB =  -ldmx
+
+LINTDMX = $(LINTLIBDIR)/llib-ldmx.ln
+
+    DPSLIBSRC = $(LIBSRC)/dps
+
+DEPDPSLIB = $(USRLIBDIR)/libdps.a
+DPSLIB =  -ldps
+
+LINTDPS = $(LINTLIBDIR)/llib-ldps.ln
+
+    DPSTKLIBSRC = $(LIBSRC)/dpstk
+
+DEPDPSTKLIB = $(USRLIBDIR)/libdpstk.a
+DPSTKLIB =  -ldpstk
+
+LINTDPSTK = $(LINTLIBDIR)/llib-ldpstk.ln
+
+    PSRESLIBSRC = $(LIBSRC)/psres
+
+DEPPSRESLIB = $(USRLIBDIR)/libpsres.a
+PSRESLIB =  -lpsres
+
+LINTPSRES = $(LINTLIBDIR)/llib-lpsres.ln
+
+    GLULIBSRC = $(LIBSRC)/GLU
+
+SOGLUREV = 1.3
+DEPGLULIB =
+GLULIB =  -lGLU
+
+LINTGLU = $(LINTLIBDIR)/llib-lGLU.ln
+
+    GLXLIBSRC = $(LIBSRC)/GL
+
+SOGLREV = 1.2
+DEPGLXLIB =
+GLXLIB =  -lGL
+
+LINTGLX = $(LINTLIBDIR)/llib-lGL.ln
+
+    GLWIDGETSRC = $(LIBSRC)/GLw
+
+DEPGLWLIB = $(USRLIBDIR)/libGLw.a
+GLWLIB =  -lGLw
+
+LINTGLW = $(LINTLIBDIR)/llib-lGLw.ln
+
+XRENDERDIR = /usr
+XRENDERLIBDIR = /usr/lib
+XRENDERINCDIR = /usr/include
+XRENDERLIB = -L$(XRENDERLIBDIR) -lXrender
+DEPXRENDERLIB =
+
+XRENDERINCLUDES = -I$(XRENDERINCDIR)
+
+    XRANDRLIBSRC = $(LIBSRC)/Xrandr
+
+SOXRANDRREV = 2.0
+DEPXRANDRLIB =
+XRANDRLIB =  -lXrandr
+
+LINTXRANDR = $(LINTLIBDIR)/llib-lXrandr.ln
+
+    XFIXESLIBSRC = $(LIBSRC)/Xfixes
+
+SOXFIXESREV = 3.0
+DEPXFIXESLIB =
+XFIXESLIB =  -lXfixes
+
+LINTXFIXES = $(LINTLIBDIR)/llib-lXfixes.ln
+
+   XDAMAGELIBSRC = $(LIBSRC)/Xdamage
+
+SOXDAMAGEREV = 1.0
+DEPXDAMAGELIB =
+XDAMAGELIB =  -lXdamage
+
+LINTXDAMAGE = $(LINTLIBDIR)/llib-lXdamage.ln
+
+XCOMPOSITELIBSRC = $(LIBSRC)/Xcomposite
+
+SOXCOMPOSITEREV = 1.0
+DEPXCOMPOSITELIB =
+XCOMPOSITELIB =  -lXcomposite
+
+LINTXCOMPOSITE = $(LINTLIBDIR)/llib-lXcomposite.ln
+
+XEVIELIBSRC = $(LIBSRC)/Xevie
+
+SOXEVIEREV = 1.0
+DEPXEVIELIB =
+XEVIELIB =  -lXevie
+
+LINTXEVIE = $(LINTLIBDIR)/llib-lXevie.ln
+
+XCURSORDIR = /usr
+XCURSORLIBDIR = /usr/lib
+XCURSORINCDIR = /usr/include
+XCURSORLIB = -L$(XCURSORLIBDIR) -lXcursor
+
+XCURSORINCLUDES=-I$(XCURSORINCDIR) $(XRENDERINCLUDES)
+
+   APPLEWMLIBSRC = $(LIBSRC)/apple
+
+DEPAPPLEWMLIB = $(USRLIBDIR)/libAppleWM.a
+APPLEWMLIB =  -lAppleWM
+
+LINTAPPLEWM = $(LINTLIBDIR)/llib-lAppleWM.ln
+
+   WINDOWSWMLIBSRC = $(LIBSRC)/windows
+
+DEPWINDOWSWMLIB = $(USRLIBDIR)/libWindowsWM.a
+WINDOWSWMLIB =  -lWindowsWM
+
+LINTWINDOWSWM = $(LINTLIBDIR)/llib-lWindowsWM.ln
+
+    XFONTCACHELIBSRC = $(LIBSRC)/Xfontcache
+
+DEPXFONTCACHELIB = $(USRLIBDIR)/libXfontcache.a
+XFONTCACHELIB =  -lXfontcache
+
+LINTXFONTCACHE = $(LINTLIBDIR)/llib-lXfontcache.ln
+
+         XAUTHSRC = $(LIBSRC)/Xau
+
+SOXAUTHREV = 6.0
+DEPXAUTHLIB =
+XAUTHLIB =  -lXau
+
+LINTXAUTH = $(LINTLIBDIR)/llib-lXau.ln
+
+      XDMCPLIBSRC = $(LIBSRC)/Xdmcp
+
+SOXDMCPREV = 6.0
+DEPXDMCPLIB =
+XDMCPLIB =  -lXdmcp
+
+LINTXDMCP = $(LINTLIBDIR)/llib-lXdmcp.ln
+
+           XMUSRC = $(LIBSRC)/Xmu
+
+SOXMUREV = 6.2
+DEPXMULIB =
+XMULIB =  -lXmu
+
+LINTXMU = $(LINTLIBDIR)/llib-lXmu.ln
+
+           XMUUSRC = $(LIBSRC)/Xmuu
+
+SOXMUUREV = 1.0
+DEPXMUULIB =
+XMUULIB =  -lXmuu
+
+LINTXMUU = $(LINTLIBDIR)/llib-lXmuu.ln
+
+       OLDXLIBSRC = $(LIBSRC)/oldX
+
+DEPOLDXLIB = $(USRLIBDIR)/liboldX.a
+OLDXLIB =  -loldX
+
+LINTOLDX = $(LINTLIBDIR)/llib-loldX.ln
+
+         XPLIBSRC = $(LIBSRC)/Xp
+
+SOXPREV = 6.2
+DEPXPLIB =
+XPLIB =  -lXp
+
+LINTXP = $(LINTLIBDIR)/llib-lXp.ln
+
+       TOOLKITSRC = $(LIBSRC)/Xt
+
+SOXTREV = 6.0
+DEPXTOOLONLYLIB =
+XTOOLONLYLIB =  -lXt
+
+LINTXTOOLONLY = $(LINTLIBDIR)/llib-lXt.ln
+
+      DEPXTOOLLIB = $(DEPXTOOLONLYLIB) $(DEPSMLIB) $(DEPICELIB)
+         XTOOLLIB = $(XTOOLONLYLIB) $(SMLIB) $(ICELIB)
+     LINTXTOOLLIB = $(LINTXTOOLONLYLIB)
+
+       XALIBSRC = $(LIBSRC)/Xa
+
+SOXAREV = 1.0
+DEPXALIB =
+XALIB =  -lXa
+
+LINTXA = $(LINTLIBDIR)/llib-lXa.ln
+
+       AWIDGETSRC = $(LIBSRC)/Xaw
+
+SOXAWREV = 8.0
+DEPXAWLIB =
+XAWLIB =  -lXaw
+
+LINTXAW = $(LINTLIBDIR)/llib-lXaw.ln
+
+       AWIDGET7SRC = $(LIBSRC)/Xaw7
+
+SOXAW7REV = 7.0
+DEPXAW7LIB =
+XAW7LIB =  -lXaw
+
+LINTXAW7 = $(LINTLIBDIR)/llib-lXaw.ln
+
+       AWIDGET6SRC = $(LIBSRC)/Xaw6
+
+SOXAW6REV = 6.1
+DEPXAW6LIB =
+XAW6LIB =  -lXaw
+
+LINTXAW6 = $(LINTLIBDIR)/llib-lXaw.ln
+
+         XILIBSRC = $(LIBSRC)/Xi
+
+SOXINPUTREV = 6.0
+DEPXILIB =
+XILIB =  -lXi
+
+LINTXI = $(LINTLIBDIR)/llib-lXi.ln
+
+      XTESTLIBSRC = $(LIBSRC)/Xtst
+
+SOXTESTREV = 6.1
+DEPXTESTLIB =
+XTESTLIB =  -lXtst
+
+LINTXTEST = $(LINTLIBDIR)/llib-lXtst.ln
+
+DEPXBSDLIB = $(USRLIBDIR)/libXbsd.a
+XBSDLIB =  -lXbsd
+
+LINTXBSD = $(LINTLIBDIR)/llib-lXbsd.ln
+
+           ICESRC = $(LIBSRC)/ICE
+
+SOICEREV = 6.4
+DEPICELIB =
+ICELIB =  -lICE
+
+LINTICE = $(LINTLIBDIR)/llib-lICE.ln
+
+            SMSRC = $(LIBSRC)/SM
+
+SOSMREV = 6.0
+DEPSMLIB =
+SMLIB =  -lSM
+
+LINTSM = $(LINTLIBDIR)/llib-lSM.ln
+
+           XKEYSRC = $(LIBSRC)/Xkey
+
+SOXKEYREV = 6.0
+DEPXKEYLIB =
+XKEYLIB =  -lXkey
+
+LINTXKEY = $(LINTLIBDIR)/llib-lXkey.ln
+
+         FSLIBSRC = $(LIBSRC)/FS
+
+SOFSREV = 6.0
+DEPFSLIB =
+FSLIB =  -lFS
+
+LINTFS = $(LINTLIBDIR)/llib-lFS.ln
+
+         FONTLIBSRC = $(LIBSRC)/font
+
+DEPFONTLIB = $(USRLIBDIR)/libXfont.a
+FONTLIB = -L$(FREETYPELIBDIR) -L$(FONTLIBSRC)  -lXfont
+
+LINTXFONT = $(LINTLIBDIR)/llib-lXfont.ln
+#
+DEPXFONTLIB = $(USRLIBDIR)/libXfont.a
+XFONTLIB =  -lXfont
+
+LINTXFONT = $(LINTLIBDIR)/llib-lXfont.ln
+
+     FONTSTUBLIBSRC = $(FONTLIBSRC)/stubs
+
+DEPFONTSTUBLIB = $(USRLIBDIR)/libfntstubs.a
+FONTSTUBLIB =  -lfntstubs
+
+LINTFONTSTUB = $(LINTLIBDIR)/llib-lfntstubs.ln
+         DEPFONTLIB = $(DEPXFONTLIB) $(DEPFONTSTUBLIB)
+            FONTLIB = $(XFONTLIB) $(FONTSTUBLIB) $(FREETYPE2LIB)
+
+         FONTENCLIBSRC = $(LIBSRC)/fontenc
+
+DEPXFONTENCLIB = $(USRLIBDIR)/libfontenc.a
+XFONTENCLIB =  -lfontenc
+
+LINTXFONTENC = $(LINTLIBDIR)/llib-lfontenc.ln
+
+          XPMLIBSRC = $(LIBSRC)/Xpm
+
+SOXPMREV = 4.11
+DEPXPMLIB =
+XPMLIB =  -lXpm
+
+LINTXPM = $(LINTLIBDIR)/llib-lXpm.ln
+
+FREETYPE2DIR = /usr
+FREETYPE2LIBDIR = /usr/lib
+FREETYPE2INCDIR = /usr/include
+
+FREETYPE2LIB = -lfreetype
+
+FREETYPE2INCLUDES = -I$(FREETYPE2INCDIR)/freetype2 -I$(FREETYPE2INCDIR)/freetype2/config
+
+FREETYPE2DEFINES = -DFREETYPE2
+
+          EXPATLIBSRC = $(LIBSRC)/expat
+
+SOEXPATREV = 0.4
+DEPEXPATLIB =
+EXPATLIB =  -lexpat
+
+LINTEXPAT = $(LINTLIBDIR)/llib-lexpat.ln
+
+EXPATDIR = /usr
+EXPATLIBDIR = /usr/lib
+EXPATINCDIR = /usr/include
+
+EXPATINCLUDES =
+
+EXPATLIB = -lexpat
+
+EXPATDEFINES = -DEXPAT
+
+XFTDIR = /usr
+XFTLIBDIR = /usr/lib
+XFTINCDIR = /usr/include
+XFTLIB = -L$(XFTLIBDIR) -lXft
+
+XFTINCLUDES= -I$(XFTINCDIR) $(FONTCONFIGINCLUDES) $(FREETYPE2INCLUDES) $(XRENDERINCLUDES)
+
+FONTCONFIGDIR = /usr
+FONTCONFIGLIBDIR = /usr/lib
+FONTCONFIGINCDIR = /usr/include
+FONTCONFIGBINDIR = /usr/bin
+
+FONTCONFIGLIB = -lfontconfig
+
+FONTCONFIGINCLUDES =
+
+FCCACHE = $(FONTCONFIGBINDIR)/fc-cache
+
+FONTCONFIGDEFINES = -DFONTCONFIG
+
+LIBPNGINCDIR = /usr/include
+
+LIBPNGINC=
+
+LIBPNGDIR = /usr
+LIBPNGLIBDIR = /usr/lib
+LIBPNGINCDIR = /usr/include
+
+LIBPNGLIB = -lpng
+
+    XKBFILELIBSRC = $(LIBSRC)/xkbfile
+
+SOXKBFILEREV =  1.0
+DEPXKBFILELIB =
+XKBFILELIB =  -lxkbfile
+
+LINTXKBFILE = $(LINTLIBDIR)/llib-lxkbfile.ln
+
+     XKBCOMPCMD = $(XBINDIR)/xkbcomp
+
+    XKBUILIBSRC = $(LIBSRC)/xkbui
+
+SOXKBUIREV =  1.0
+DEPXKBUILIB =
+XKBUILIB =  -lxkbui
+
+LINTXKBUI = $(LINTLIBDIR)/llib-lxkbui.ln
+
+EXTRAXAWREQS =
+
+EXTRAXAWCLIENTDEPLIBS =
+
+EXTRAXAWCLIENTLIBS =
+
+        XTRAPLIBSRC = $(LIBSRC)/XTrap
+
+SOXTRAPREV = 6.4
+DEPXTRAPLIB =
+XTRAPLIB =  -lXTrap
+
+LINTXTRAP = $(LINTLIBDIR)/llib-lXTrap.ln
+
+          DEPLIBS = $(DEPXAWLIB) $(DEPXMULIB) $(DEPXTOOLLIB) $(DEPXLIB)
+
+         DEPLIBS1 = $(DEPLIBS)
+         DEPLIBS2 = $(DEPLIBS)
+         DEPLIBS3 = $(DEPLIBS)
+         DEPLIBS4 = $(DEPLIBS)
+         DEPLIBS5 = $(DEPLIBS)
+         DEPLIBS6 = $(DEPLIBS)
+         DEPLIBS7 = $(DEPLIBS)
+         DEPLIBS8 = $(DEPLIBS)
+         DEPLIBS9 = $(DEPLIBS)
+         DEPLIBS10 = $(DEPLIBS)
+
+      XFTPRELOADPATTERN = libXft.so.?
+  XRENDERPRELOADPATTERN = libXrender.so.?
+    XFONTPRELOADPATTERN = libXfont*.so.?
+
+XMULIBONLY = -lXmu
+XMULIB = $(XMULIBONLY) $(XTOOLLIB) $(XLIB)
+
+        CONFIGDIR = $(LIBDIR)/config
+
+    USRLIBDIRPATH = $(USRLIBDIR)
+        LDPRELIBS =   $(INSTALLED_LIBS)
+       LDPOSTLIBS =
+     TOP_INCLUDES =  $(TOP_X_INCLUDES)
+  PROJECT_DEFINES =
+   VENDOR_DEFINES = -DXVENDORNAME='"$(VENDORNAME)"' -DXVENDORNAMESHORT='"$(VENDORNAMESHORT)"'
+
+CXXPROJECT_DEFINES =
+
+# ----------------------------------------------------------------------
+# start of Imakefile
+
+# $XConsortium: Imakefile /main/137 1996/10/08 07:38:14 swick $
+# $XFree86: xc/Imakefile,v 3.11.2.2 1998/02/28 04:47:00 dawes Exp $
 
 RELEASE = "Release 6.3"
-SHELL = /bin/sh
-RM = rm -f
-MV = mv
-WORLDOPTS = -k
-WIN32WORLDOPTS = -i
-TOP = .
-CURRENT_DIR = .
-CONFIGSRC = $(TOP)/config
-IMAKESRC = $(CONFIGSRC)/imake
-DEPENDSRC = $(CONFIGSRC)/makedepend
-DEPENDTOP = ../..
-IMAKETOP = ../..
-IRULESRC = $(CONFIGSRC)/cf
-IMAKE = $(IMAKESRC)/imake
-IMAKE_CMD = $(IMAKE) -I$(IRULESRC) $(IMAKE_DEFINES)
-MAKE_OPTS = -f xmakefile
-MAKE_CMD = $(MAKE) $(MAKE_OPTS)
-FLAGS = $(MFLAGS) -f Makefile.ini BOOTSTRAPCFLAGS="$(BOOTSTRAPCFLAGS)"
-
-all:
-	@$(MAKE_CMD) xmakefile-exists || $(MAKE) all-initial
-	@$(MAKE_CMD) $@
-
-all-initial:
-	@echo Please use make World, or on NT use nmake World.Win32.
-	@echo Check the configuration parameters in the $(IRULESRC) directory,
-	@echo and pass BOOTSTRAPCFLAGS if necessary.
-	@echo Read the release notes carefully before proceeding.
-	@echo Do not name your log file make.log or it will be deleted.
-
-World:
-	@echo ""
-	@echo Building $(RELEASE) of the X Window System.
-	@echo ""
-	@case "x$(BOOTSTRAPCFLAGS)" in x) \
-	echo I hope you checked the configuration parameters in $(IRULESRC) ; \
-	echo to see if you need to pass BOOTSTRAPCFLAGS. ; \
-	echo "" ; \
-	;; esac;
-	@date
+
+        FONTSDIR = fonts
+
+        DOCSDIR = doc
+        NLSSUBDIR = nls
+
+        SUBDIRS = include config lib $(NLSSUBDIR)                   programs $(FONTSDIR) $(DOCSDIR)
+
+  LNINSTALLDIRS = lib
+
+all::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "making" all "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS) CDEBUGFLAGS="$(CDEBUGFLAGS)" all; \
+	done
+
+install.ln::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(LNINSTALLDIRS) ;\
+	do \
+		echo "linting" for install.ln and install.ln "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS) DESTDIR=$(DESTDIR) LINTOPTS='$(LINTOPTS)' install.ln; \
+	done
+
+external.ln::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(LNINSTALLDIRS) ;\
+	do \
+		echo "linting" for external.ln and lintlib "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS) DESTDIR=$(DESTDIR) LINTOPTS='$(LINTOPTS)' lintlib; \
+	done
+
+depend::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "depending" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS)  depend; \
+	done
+
+VerifyOS::
 	@echo ""
-	@if [ ! -f $(IRULESRC)/host.def ]; then \
-	    if [ ! -f $(TOP)/lib/Xt/Imakefile ]; then \
-		echo "#define BuildServersOnly YES" > $(IRULESRC)/host.def; \
-	    else \
-		if [ ! -f $(TOP)/fonts/Imakefile ]; then \
-		    echo "#define BuildFonts NO" > $(IRULESRC)/host.def; \
-		else \
-		    echo "" > $(IRULESRC)/host.def; \
-		fi \
-	    fi \
+	@echo Building on Linux 2.6.32-trunk-686-bigmem i686 [ELF] "("2"."6"."32")."
+	@echo ""
+
+	@echo libc version 6"."10"."2
+	@echo ""
+
+includes::
+	@if [ -d $(BUILDINCDIR) ]; then \
+		set +x; \
+	else \
+		if [ -h $(BUILDINCDIR) ]; then \
+			(set -x; rm -f $(BUILDINCDIR)); \
+		fi; \
+		(set -x; $(MKDIRHIER) $(BUILDINCDIR)); \
+	fi
+	@if [ -d $(BUILDBINDIR) ]; then \
+		set +x; \
+	else \
+		if [ -h $(BUILDBINDIR) ]; then \
+			(set -x; rm -f $(BUILDBINDIR)); \
+		fi; \
+		(set -x; $(MKDIRHIER) $(BUILDBINDIR)); \
 	fi
-	cd $(IMAKESRC) && $(MAKE) $(FLAGS) clean
-	$(MAKE) $(MFLAGS) Makefile.boot
-	$(MAKE_CMD) $(MFLAGS) VerifyOS
-	$(MAKE_CMD) $(MFLAGS) Makefiles
-	$(MAKE_CMD) $(MFLAGS) clean BOOTSTRAPSUBDIRS=
-	$(MAKE_CMD) $(MFLAGS) includes
-	$(MAKE_CMD) $(MFLAGS) depend
-	$(MAKE_CMD) $(MFLAGS) $(WORLDOPTS) World
+
+#
+# Watch out!!!  Make sure you do make includes after removing X11....
+#
+cleandir::
+	$(RM) -r $(BUILDINCDIR)
+	$(RM) -r $(BUILDLIBDIR)
+	$(RM) -r $(BUILDBINDIR)
+
+World::
+	$(MAKE) $(MFLAGS) $(MAKE_OPTS) $(PARALLELOPTS) all
+
+Everything::
+	@echo ""
+	@echo Rebuilding $(RELEASE) of the X Window System.
+	@echo ""
+	@date
+	@echo ""
+	cd $(IMAKESRC) && if [ -f Makefile ]; then 	    $(MAKE) $(MFLAGS) BOOTSTRAPCFLAGS="$(BOOTSTRAPCFLAGS)"; 	else 	    $(MAKE) $(MFLAGS) -f Makefile.ini BOOTSTRAPCFLAGS="$(BOOTSTRAPCFLAGS)"; 	fi
+
+	$(MAKE) $(MFLAGS) $(MAKE_OPTS) Makefiles
+	$(MAKE) $(MFLAGS) $(MAKE_OPTS) includes
+	$(MAKE) $(MFLAGS) $(MAKE_OPTS) depend
+	$(MAKE) $(MFLAGS) $(MAKE_OPTS) $(WORLDOPTS)
 	@echo ""
 	@date
 	@echo ""
-	@echo Full build of $(RELEASE) of the X Window System complete.
+	@echo Rebuild of $(RELEASE) of the X Window System complete.
 	@echo ""
 
-.PRECIOUS: Makefile
+# cleandir out link tree looking for stuff that should get checked in
+dangerous_strip_clean::
+	$(MAKE) -k cleandir
+	find . -type l -exec rm {} \;
+	find . \( \! \( -type d -o -name Makefile \) \) -print
+
+BOOTSTRAPSUBDIRS = imake makedepend
+
+# ----------------------------------------------------------------------
+# common rules for all Makefiles - do not edit
+
+.c.i:
+	$(RM) $@
+	 	$(CC) -E $(CFLAGS) $(_NOOP_) $*.c > $@
+
+.SUFFIXES: .ii
+
+.cc.ii:
+	$(RM) $@
+	 	$(CC) -E $(CFLAGS) $(_NOOP_) $*.cc > $@
+
+.SUFFIXES: .s
+
+.c.s:
+	$(RM) $@
+	 	$(CC) -S $(CFLAGS) $(_NOOP_) $*.c
+
+.cc.s:
+	$(RM) $@
+	 	$(CC) -S $(CFLAGS) $(_NOOP_) $*.cc
+
+emptyrule::
+
+cleandir::
+	$(RM) *.CKP *.ln *.BAK *.bak *.o core errs ,* *~ *.a .emacs_* tags TAGS make.log MakeOut   "#"*
+
+tags::
+	$(TAGS) -w *.[ch]
+	$(TAGS) -xw *.[ch] > TAGS
+
+man_keywords::
+
+html_index::
+
+clean:: cleandir
+
+distclean:: cleandir
+
+# ----------------------------------------------------------------------
+# rules for building in SUBDIRS - do not edit
+
+install::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "installing" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS) DESTDIR=$(DESTDIR) install; \
+	done
+
+install.man::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "installing man pages" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS) DESTDIR=$(DESTDIR) install.man; \
+	done
+
+install.sdk::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "installing driver SDK" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS) DESTDIR='$(DESTDIR)' install.sdk; \
+	done
+
+clean::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "cleaning" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS) BOOTSTRAPSUBDIRS="$(BOOTSTRAPSUBDIRS)" clean; \
+	done
+
+tags::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "tagging" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS) TAGS='$(TAGS)' tags; \
+	done
+
+$(ONESUBDIR)/Makefile:
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[n]*) executeit="no";; esac; done; \
+	cd $(ONESUBDIR) && \
+	if [ "$$executeit" != "no" ]; then \
+		$(IMAKE_CMD) -DTOPDIR=$(IMAKETOP) -DCURDIR=$(ONECURDIR)$(ONESUBDIR); \
+	fi;
+
+Makefiles::
+	-@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[n]*) executeit="no";; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		case "$(CURRENT_DIR)" in \
+		.) curdir= ;; \
+		*) curdir=$(CURRENT_DIR)/ ;; \
+		esac; \
+		echo "making Makefiles in $$curdir$$i..."; \
+		itmp=`echo $$i | sed -e 's;^\./;;g' -e 's;/\./;/;g'`; \
+		curtmp="$(CURRENT_DIR)" \
+		toptmp=""; \
+		case "$$itmp" in \
+		    ../?*) \
+			while echo "$$itmp" | grep '^\.\./' > /dev/null;\
+			  do \
+			     toptmp="/`basename $$curtmp`$$toptmp"; \
+			     curtmp="`dirname $$curtmp`"; \
+			     itmp="`echo $$itmp | sed 's;\.\./;;'`"; \
+			  done \
+		    ;; \
+		esac; \
+		case "$$itmp" in \
+		*/?*/?*/?*/?*)	newtop=../../../../..;; \
+		*/?*/?*/?*)	newtop=../../../..;; \
+		*/?*/?*)	newtop=../../..;; \
+		*/?*)		newtop=../..;; \
+		*)		newtop=..;; \
+		esac; \
+		newtop="$$newtop$$toptmp"; \
+		case "$(TOP)" in \
+		/?*) imaketop=$(TOP) \
+		     imakeprefix= ;; \
+		.) imaketop=$$newtop \
+		   imakeprefix=$$newtop/ ;; \
+		*) imaketop=$$newtop/$(TOP) \
+		   imakeprefix=$$newtop/ ;; \
+		esac; \
+		$(RM) $$i/Makefile.bak; \
+		if [ -f $$i/Makefile ]; then \
+			echo "	$(MV) Makefile Makefile.bak"; \
+			if [ "$$executeit" != "no" ]; then \
+				$(MV) $$i/Makefile $$i/Makefile.bak; \
+			fi; \
+		fi; \
+		$(MAKE) $(MFLAGS) $(MAKE_OPTS) ONESUBDIR=$$i ONECURDIR=$$curdir IMAKETOP=$$imaketop IMAKEPREFIX=$$imakeprefix $$i/Makefile; \
+		if [ -d $$i ] ; then \
+			cd $$i; \
+			$(MAKE) $(MFLAGS) Makefiles; \
+			cd $$newtop; \
+		else \
+			exit 1; \
+		fi; \
+	done
+
+includes::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo including "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS)  includes; \
+	done
+
+distclean::
+	@for flag in ${MAKEFLAGS} ''; do \
+	  case "$$flag" in *=*) ;; --*) ;; *[ik]*) set +e;; esac; done; \
+	for i in $(SUBDIRS) ;\
+	do \
+		echo "cleaning" "in $(CURRENT_DIR)/$$i..."; \
+		$(MAKE) -C $$i $(MFLAGS) $(PARALLELMFLAGS)  distclean; \
+	done
+
+    PREPROCESSMANPAGES = true
+
+install.man:: man_keywords
+
+# ----------------------------------------------------------------------
+# dependencies generated by makedepend
 
-# This is just a sequence of bootstrapping steps we have to do.
-# The steps are listed as separate targets so clearmake can wink in
-# the Makefile.proto files.
-Makefile.boot: imake.proto $(DEPENDSRC)/Makefile.proto depend.bootstrap $(IMAKESRC)/Makefile.proto imake.bootstrap
-
-imake.proto:
-	cd $(IMAKESRC) && $(MAKE) $(FLAGS)
-	$(RM) $(DEPENDSRC)/Makefile.proto
-
-$(DEPENDSRC)/Makefile.proto:
-	$(IMAKE_CMD) -s $(DEPENDSRC)/Makefile.proto -f $(DEPENDSRC)/Imakefile -DTOPDIR=$(DEPENDTOP) -DCURDIR=$(DEPENDSRC)
-
-depend.bootstrap:
-	cd $(DEPENDSRC) && $(RM) -r Makefile Makefile.dep makedepend *.o bootstrap
-	cd $(DEPENDSRC) && $(MAKE) -f Makefile.proto bootstrap
-
-$(IMAKESRC)/Makefile.proto:
-	$(IMAKE_CMD) -s $(IMAKESRC)/Makefile.proto -f $(IMAKESRC)/Imakefile -DTOPDIR=$(IMAKETOP) -DCURDIR=$(IMAKESRC)
-
-imake.bootstrap:
-	cd $(IMAKESRC) && $(MAKE) -f Makefile.proto bootstrapdepend
-	cd $(IMAKESRC) && $(MAKE) $(FLAGS) bootstrap
-	cd $(IMAKESRC) && $(MAKE) -f Makefile.proto all 
-	-@if [ -f xmakefile ]; then set -x; \
-	  $(RM) xmakefile.bak; $(MV) xmakefile xmakefile.bak; \
-	  else exit 0; fi
-	$(MAKE) $(MFLAGS) xmakefile
-
-Makefile::
-	$(MAKE) $(MFLAGS) xmakefile
-
-xmakefile: Imakefile
-	$(IMAKE_CMD) -s xmakefile -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT_DIR)
-
-World.Win32:
-	@echo :
-	@echo Building $(RELEASE) of the X Window System.
-	@echo :
-	@echo :
-	-@if not exist $(IRULESRC)\host.def echo > $(IRULESRC)\host.def
-	cd $(IMAKESRC)
-	$(MAKE) -f Makefile.ini clean.Win32
-	$(MAKE) -f Makefile.ini imake.exe
-	cd ..\..
-	-if exist xmakefile.bak del xmakefile.bak
-	-if exist xmakefile ren xmakefile xmakefile.bak
-	$(IMAKE:/=\) -s xmakefile -I$(IRULESRC) $(IMAKE_DEFINES) -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT_DIR)
-	$(MAKE_CMD) $(MFLAGS) VerifyOS
-	$(MAKE_CMD) $(MFLAGS) Makefiles
-	$(MAKE_CMD) $(MFLAGS) clean
-	cd $(CONFIGSRC)\util
-	$(MAKE) mkdirhier.exe
-	cd ..\..
-	$(MAKE_CMD) $(MFLAGS) includes
-	$(MAKE_CMD) $(MFLAGS) depend
-	$(MAKE_CMD) $(MFLAGS) $(WIN32WORLDOPTS)
-	@echo :
-	@echo :
-	@echo Full build of $(RELEASE) of the X Window System complete.
-	@echo :
-
-World.OS2:
-	@echo :
-	@echo Building $(RELEASE) of the X Window System on OS/2.
-	@echo :
-	@echo :
-	-@if not exist $(IRULESRC)\host.def echo > $(IRULESRC)\host.def
-	\indir $(IMAKESRC) $(MAKE) SHELL= -f Makefile.ini clean.os2
-	\indir $(IMAKESRC) $(MAKE) SHELL= CC=gcc -f Makefile.ini imake.os2
-	-if exist Makefile.bak del Makefile.bak
-	-if exist Makefile ren Makefile Makefile.bak
-	$(subst /,\,$(IMAKE)) -I$(IRULESRC) $(IMAKE_DEFINES) -DTOPDIR=$(TOP) -DCURDIR=$(CURRENT_DIR)
-	$(MAKE) $(MFLAGS) VerifyOS
-	$(MAKE) $(MFLAGS) Makefiles
-	$(MAKE) $(MFLAGS) clean
-	$(MAKE) $(MFLAGS) includes
-	$(MAKE) $(MFLAGS) depend
-	$(MAKE) $(MFLAGS)  
-	@echo :
-	@echo :
-	@echo Full build of $(RELEASE) of the X Window System complete.
-	@echo :
-
-# don't allow any default rules in this Makefile
-.SUFFIXES:
-# quiet "make" programs that display a message if suffix list empty
-.SUFFIXES: .Dummy
-
-# a copy of every rule that might be invoked at top level
-
-clean:
-	    $(MAKE_CMD) $@
-dangerous_strip_clean:
-	    $(MAKE_CMD) $@
-depend:
-	    $(MAKE_CMD) $@
-Everything:
-	    $(MAKE_CMD) $@
-external.ln:
-	    $(MAKE_CMD) $@
-includes:
-	    $(MAKE_CMD) $@
-install.linkkit:
-	    $(MAKE_CMD) $@
-install.ln:
-	    $(MAKE_CMD) $@
-install.man:
-	    $(MAKE_CMD) $@
-install:
-	    $(MAKE_CMD) $@
-Makefiles:
-	    $(MAKE_CMD) $@
-man_keywords:
-	    $(MAKE_CMD) $@
-tags:
-	    $(MAKE_CMD) $@
-VerifyOS:
-	    $(MAKE_CMD) $@
Index: b/Xvnc/config/cf/X11.tmpl
===================================================================
--- a/Xvnc/config/cf/X11.tmpl
+++ b/Xvnc/config/cf/X11.tmpl
@@ -666,10 +666,10 @@ XCOMM $XFree86: xc/config/cf/X11.tmpl,v
 #define ConfigDir $(LIBDIR)/config
 #endif
 #ifndef FontDir
-#define FontDir $(LIBDIR)/fonts
+#define FontDir /usr/share/fonts/X11
 #endif
 #ifndef AdmDir
-#define AdmDir /usr/adm
+#define AdmDir /var/log
 #endif
 #ifndef XinitDir
 #define XinitDir $(LIBDIR)/xinit
@@ -714,7 +714,7 @@ XCOMM $XFree86: xc/config/cf/X11.tmpl,v
 #define XPrintDir $(LIBDIR)
 #endif
 #ifndef ServerConfigDir
-#define ServerConfigDir $(LIBDIR)/xserver
+#define ServerConfigDir /etc/X11/xserver
 #endif
 #ifndef VarDirectory
 #define VarDirectory /var/X11
@@ -735,7 +735,7 @@ XCOMM $XFree86: xc/config/cf/X11.tmpl,v
 #endif
 #endif
 #ifndef XAppLoadDir
-#define XAppLoadDir $(LIBDIR)/app-defaults
+#define XAppLoadDir /etc/app-defaults
 #endif
 #ifndef XtErrorPrefix
 #define XtErrorPrefix /* as empty string */
@@ -798,14 +798,14 @@ XCOMM X Window System make variables; th
      XBUILDBINDIR = XBuildBinDir
            INCDIR = $(INCROOT)		/* header files */
            ADMDIR = AdmDir		/* server log files */
-           LIBDIR = LibDir		/* rgb, XErrorDB, etc. */
+           LIBDIR = /usr/share/X11		/* rgb, XErrorDB, etc. */
    TOP_X_INCLUDES = TopXInclude
 
 #ifdef VarDirectory
            VARDIR = VarDirectory
 #endif
 
-          FONTDIR = FontDir		/* font directories */
+          FONTDIR = /usr/share/fonts/X11		/* font directories */
          XINITDIR = XinitDir		/* xinit config files */
            XDMDIR = XdmDir		/* xdm config files */
         XDMVARDIR = XdmVarDir		/* xdm config files */
Index: b/Xvnc/config/cf/svr3.cf
===================================================================
--- a/Xvnc/config/cf/svr3.cf
+++ b/Xvnc/config/cf/svr3.cf
@@ -51,7 +51,7 @@ XCOMM $XFree86: xc/config/cf/svr3.cf,v 3
 #endif
 
 #ifndef XmanSearchPath
-#define XmanSearchPath		/usr/man
+#define XmanSearchPath		/usr/share/man
 #endif
 
 /*
Index: b/Xvnc/config/cf/Imake.cf
===================================================================
--- a/Xvnc/config/cf/Imake.cf
+++ b/Xvnc/config/cf/Imake.cf
@@ -600,7 +600,7 @@ XCOMM $XFree86: xc/config/cf/Imake.cf,v
 # define Win32Architecture
 #endif /* WIN32 */
 
-#ifdef linux 
+#if defined(linux) || defined(__GLIBC__)
 # define MacroIncludeFile <linux.cf>
 # define MacroFile linux.cf
 # undef linux
@@ -711,7 +711,7 @@ XCOMM Keep cpp from replacing path eleme
 #  undef __alpha__
 # endif /* __alpha__ */
 # ifdef __arm__
-#  define Arm32Architecture
+#  define ArmArchitecture
 #  undef arm
 #  undef __arm
 #  undef __arm__
Index: b/Xvnc/config/cf/Imake.tmpl
===================================================================
--- a/Xvnc/config/cf/Imake.tmpl
+++ b/Xvnc/config/cf/Imake.tmpl
@@ -490,7 +490,7 @@ TCLIBDIR = TclLibDir
 #if SystemV4
 #define SystemManDirectory /usr/share/man
 #else
-#define SystemManDirectory /usr/man
+#define SystemManDirectory /usr/share/man
 #endif
 #endif
 #ifndef ManDirectoryRoot
Index: b/Xvnc/programs/Xserver/Xvnc.man
===================================================================
--- a/Xvnc/programs/Xserver/Xvnc.man
+++ b/Xvnc/programs/Xserver/Xvnc.man
@@ -141,7 +141,7 @@ network addresses. Probably, the best wa
 allow only loopback connections from the server machine (the
 \fI\-localhost\fR option) and to use SSH tunneling for remote access
 to the Xvnc server. For details on SSH tunneling, see
-<URL:http://www.uk.research.att.com/vnc/sshvnc.html> .
+<URL:http://www.cl.cam.ac.uk/Research/DTG/attarchive/vnc/sshvnc.html> .
 .SH SEE ALSO
 \fBvncserver\fR(1), \fBvncviewer\fR(1), \fBvncpasswd\fR(1),
 \fBvncconnect\fR(1), \fBsshd\fR(1)
Index: b/Xvnc/programs/Xserver/Xserver.man
===================================================================
--- a/Xvnc/programs/Xserver/Xserver.man
+++ b/Xvnc/programs/Xserver/Xserver.man
@@ -649,7 +649,7 @@ Unix domain socket for display number \f
 /tmp/rcX\fBn\fP
 Kerberos 5 replay cache for display number \fBn\fP
 .TP 30
-/usr/adm/X\fBn\fPmsgs
+/var/log/X\fBn\fPmsgs
 Error log file for display number \fBn\fP if run from \fIinit(8)\fP
 .TP 30
 <XRoot>/lib/X11/xdm/xdm-errors
Index: b/Xvnc/programs/Xserver/os/osinit.c
===================================================================
--- a/Xvnc/programs/Xserver/os/osinit.c
+++ b/Xvnc/programs/Xserver/os/osinit.c
@@ -71,7 +71,7 @@ SOFTWARE.
 #endif
 
 #ifndef ADMPATH
-#define ADMPATH "/usr/adm/X%smsgs"
+#define ADMPATH "/var/log/X%smsgs"
 #endif
 
 extern char *display;
Index: b/Xvnc/programs/Xserver/include/servermd.h
===================================================================
--- a/Xvnc/programs/Xserver/include/servermd.h
+++ b/Xvnc/programs/Xserver/include/servermd.h
@@ -421,6 +421,20 @@ SOFTWARE.
 
 #endif /* Linux/PPC */
 
+#if defined (linux) && defined(__sparc__)
+
+#define IMAGE_BYTE_ORDER       MSBFirst
+#define BITMAP_BIT_ORDER       MSBFirst
+#define GLYPHPADBYTES          4
+#define GETLEFTBITS_ALIGNMENT  1
+
+#define AVOID_MEMORY_READ 
+#define LARGE_INSTRUCTION_CACHE
+#define FAST_CONSTANT_OFFSET_MODE
+#define SHARED_IDCACHE
+
+#endif /* Linux/sparc */
+
 #if defined(__MACH__) && defined(__POWERPC__)
 
 #define IMAGE_BYTE_ORDER       MSBFirst
Index: b/Xvnc/programs/Xserver/dix/dixfonts.c
===================================================================
--- a/Xvnc/programs/Xserver/dix/dixfonts.c
+++ b/Xvnc/programs/Xserver/dix/dixfonts.c
@@ -1759,10 +1759,11 @@ SetFontPathElements(npaths, paths, bad)
 	    if (err != Successful) {
 		xfree(fpe->name);
 		xfree(fpe);
-		err = BadValue;
-		goto bail;
+		err = Successful;
 	    }
-	    fplist[valid_paths++] = fpe;
+	    else {
+	      fplist[valid_paths++] = fpe;
+            }
 	} else {
 	    err = BadValue;
 	    goto bail;
Index: b/Xvnc/programs/Xserver/cfb/Imakefile
===================================================================
--- a/Xvnc/programs/Xserver/cfb/Imakefile
+++ b/Xvnc/programs/Xserver/cfb/Imakefile
@@ -193,8 +193,11 @@ stipmipste.s: stipmips.s
 clean::
 	$(RM) stipmipste.s
 
+stipmips.o: stipmips.s
+	$(CPP) AsmDefines stipmips.s | $(AS) -o $@ -
+
 stipmipste.o: stipmipste.s
-	$(AS) -o $@ -DTETEXT stipmipste.s
+	$(CPP) AsmDefines -DTETEXT stipmipste.s | $(AS) -o $@ -
 #endif
 
 #ifdef SparcArchitecture
